<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    

    <title>手动启动 Fabric 1.4.2 并解析全过程 | sym的博客</title>
    <meta property="og:title" content="手动启动 Fabric 1.4.2 并解析全过程 - sym的博客">
    <meta property="og:type" content="article">
        
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,sym,java,android,博客,项目管理,python,软件架构,公众号,小程序">
    <meta name="description" content="手动启动 Fabric 1.4.2 并解析全过程">
        
    <meta name="author" content="sym">
    <meta property="og:url" content="https://shenyimingdada.github.io/%E4%BD%BF%E7%94%A8Chaincode%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E8%B0%83%E8%AF%95%E9%93%BE%E7%A0%81.html">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://shenyimingdada.github.io/">
                        sym的博客
                    </a>
                
                <p class="description">专注于Android、Java、Go语言(golang)、移动互联网、项目管理、软件架构</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://shenyimingdada.github.io/">首页</a>
                    
                    <a  href="https://shenyimingdada.github.io/tools/" title="工具">工具</a>
                    
                    <a  href="https://shenyimingdada.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://shenyimingdada.github.io/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#1-生成组织关系和身份证书">1. 生成组织关系和身份证书</a>
      <ul>
        <li><a href="#11-cryptogen-工具的使用">1.1 <code>cryptogen</code> 工具的使用</a></li>
        <li><a href="#12-crypto-configyaml配置文件解析">1.2 <code>crypto-config.yaml</code>配置文件解析</a></li>
        <li><a href="#13-生成组织关系和身份证书">1.3 生成组织关系和身份证书</a></li>
      </ul>
    </li>
    <li><a href="#2-生成-orderer-服务启动的创世区块和-channel-等文件">2 生成 Orderer 服务启动的创世区块和 Channel 等文件</a>
      <ul>
        <li><a href="#21-configtxgen工具的使用">2.1 <code>configtxgen</code>工具的使用</a></li>
        <li><a href="#22-configtxyaml配置文件解析">2.2 <code>configtx.yaml</code>配置文件解析</a></li>
        <li><a href="#23-生成-orderer-服务启动的创世区块和-channel-等文件">2.3 生成 Orderer 服务启动的创世区块和 Channel 等文件</a></li>
      </ul>
    </li>
    <li><a href="#3-使用-docker-容器方式启动-fabric-网络">3 使用 Docker 容器方式启动 Fabric 网络</a>
      <ul>
        <li><a href="#31-所需的docker-compose启动文件介绍">3.1 所需的<code>docker-compose</code>启动文件介绍</a></li>
        <li><a href="#32-启动-fabric-网络中的-ordererpeer-和-cli-容器服务">3.2 启动 Fabric 网络中的 Orderer、peer 和 cli 容器服务</a></li>
      </ul>
    </li>
    <li><a href="#4-创建加入通道更新锚节点">4 创建、加入通道，更新锚节点</a>
      <ul>
        <li><a href="#41-创建通道操作">4.1 创建通道操作</a></li>
        <li><a href="#42-加入通道">4.2 加入通道</a></li>
        <li><a href="#43-更新锚节点操作">4.3 更新锚节点操作</a></li>
      </ul>
    </li>
    <li><a href="#5-安装实例化执行链码">5 安装、实例化、执行链码</a>
      <ul>
        <li><a href="#51-安装链码">5.1 安装链码</a></li>
        <li><a href="#52-实例化链码">5.2 实例化链码</a></li>
        <li><a href="#53-调用链码">5.3 调用链码</a></li>
        <li><a href="#54-其他channelchaincode操作">5.4 其他<code>Channel</code>、<code>Chaincode</code>操作</a></li>
      </ul>
    </li>
    <li><a href="#6-参考">6 参考</a></li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title">手动启动 Fabric 1.4.2 并解析全过程</h1>
        </header>
        <date class="post-meta meta-date">
            1年1月1日
        </date>
        
        <div class="post-meta">
            <span>|</span>
            
            <span class="meta-category"><a href='/categories/Golang'>Golang</a></span>
            
            <span class="meta-category"><a href='/categories/fabric'>fabric</a></span>
            
        </div>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="clear" style="display: none">
            <div class="toc-article">
                <div class="toc-title">文章目录</div>
            </div>
        </div>
        
        <div class="post-content">
            <blockquote>
<p><strong>注</strong>：以基于<code>docker</code>容器的方式启动；测试网络为 <code>first-network</code>，所以各种配置文件可以不用创建和修改即可使用；网络模式为 <code>solo</code></p>
</blockquote>
<h2 id="1-生成组织关系和身份证书">1. 生成组织关系和身份证书</h2>
<p>Fabric 项目提供了 <code>cryptogen</code> 工具（基于 crypto 标准库）实现自动化生成各个组织、节点和用户成员的身份证书文件。这一过程需要依赖于<code>crypto-config.yaml</code>配置文件。</p>
<h3 id="11-cryptogen-工具的使用">1.1 <code>cryptogen</code> 工具的使用</h3>
<p>首先我们先来看一下<code>cryptogen</code>工具使用，这个工具之前我们已经安装在<code>$GOPATH/bin</code>目录下面了。我们使用命令<code>cryptogen --help</code>可以查看该工具主要有如下几个功能：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">generate <span style="color:#000;font-weight:bold">[</span>&lt;flags&gt;<span style="color:#000;font-weight:bold">]</span> <span style="color:#998;font-style:italic"># 根据配置文件生成各种证书文件</span>
showtemplate <span style="color:#998;font-style:italic"># 显示默认的配置文件</span>
version <span style="color:#998;font-style:italic"># 显示本工具的版本信息</span>
extend <span style="color:#000;font-weight:bold">[</span>&lt;flags&gt;<span style="color:#000;font-weight:bold">]</span> <span style="color:#998;font-style:italic"># 扩展现有的网络，根据配置文件生成需要扩展的证书文件</span>
</code></pre></td></tr></table>
</div>
</div><p>运行<code>cryptogen generate --help</code>，我们可以看到，对于<code>generate</code>命令还有如下的参数设置：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">--output<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;crypto-config&#34;</span>  <span style="color:#998;font-style:italic"># 指定生成的各种证书文件的输出存放目录,例如 crypto-config</span>
--config<span style="color:#000;font-weight:bold">=</span>CONFIG           <span style="color:#998;font-style:italic"># 指定使用到的配置文件,例如 crypto-config.yaml</span>
</code></pre></td></tr></table>
</div>
</div><p>通样，对于<code>extend</code>命令，我们也可以看到还有如下的参数可以设置：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">--input<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;crypto-config&#34;</span>  <span style="color:#998;font-style:italic"># 指定已经存在的网络的证书文件存放位置</span>
--config<span style="color:#000;font-weight:bold">=</span>CONFIG          <span style="color:#998;font-style:italic"># 指定使用到的扩展的配置文件</span>
</code></pre></td></tr></table>
</div>
</div><p>工具的基本使用示例如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">cryptogen generate --config<span style="color:#000;font-weight:bold">=</span>./crypto-config.yaml --output ./crypto-config <span style="color:#998;font-style:italic"># 根据 crypto-config.yaml 配置文件在 crypto-config 目录下生成网络的各种证书文件</span>
cryptogen extend --input<span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;crypto-config&#34;</span> --config<span style="color:#000;font-weight:bold">=</span>config.yaml <span style="color:#998;font-style:italic"># 根据 config.yaml 扩展配置文件在现有的网络证书文件目录 crypto-config 下生成扩展的证书文件</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="12-crypto-configyaml配置文件解析">1.2 <code>crypto-config.yaml</code>配置文件解析</h3>
<p>一个基本的<code>crypto-config.yaml</code>配置文件如下所示，同时也是本文启动网络所使用到的配置文件</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000;font-weight:bold">OrdererOrgs</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义 orderer 排序节点组织结构</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000;font-weight:bold">Name</span>:<span style="color:#bbb"> </span>Orderer<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># Orderer 排序节点组织的名称</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Domain</span>:<span style="color:#bbb"> </span>example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># orderer 排序节点组织的根域名</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Specs</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 根据 “{{.Hostname}}.{{.Domain}}” 格式的模板生成各个排序节点的访问域名和该排序节点各种证书文件</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#000;font-weight:bold">Hostname</span>:<span style="color:#bbb"> </span>orderer<span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># 生成的访问域名为 orderer.example.com</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#000;font-weight:bold">Hostname</span>:<span style="color:#bbb"> </span>orderer2<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 生成的访问域名为 orderer2.example.com</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#000;font-weight:bold">Hostname</span>:<span style="color:#bbb"> </span>orderer3<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 生成的访问域名为 orderer3.example.com</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#000;font-weight:bold">Hostname</span>:<span style="color:#bbb"> </span>orderer4<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 生成的访问域名为 orderer4.example.com</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#000;font-weight:bold">Hostname</span>:<span style="color:#bbb"> </span>orderer5<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 生成的访问域名为 orderer5.example.com</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">PeerOrgs</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义 Peer 节点组织结构</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000;font-weight:bold">Name</span>:<span style="color:#bbb"> </span>Org1<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 第一个组织名称 Org1</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Domain</span>:<span style="color:#bbb"> </span>org1.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 第一个组织的根域名</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">EnableNodeOUs</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 如果为 true，则在 msp 目录下就会生成 config.yaml 文件</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Template</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 模板，根据默认的规则在 Org1 下生成 &#34;0 ~ Count-1&#34; 个peer节点</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">Count</span>:<span style="color:#bbb"> </span><span style="color:#099">2</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义生成 2 个 peer 节点（peer0.org1.example.com，peer1.org1.example.com）</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Users</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义创建普通用户的数量，管理员用户（Admin@org1.example.com）会默认创建</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">Count</span>:<span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 创建一个普通用户（User1@org1.example.com）</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span>- <span style="color:#000;font-weight:bold">Name</span>:<span style="color:#bbb"> </span>Org2<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 第二个组织名称 Org2</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Domain</span>:<span style="color:#bbb"> </span>org2.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 第一个组织的根域名</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">EnableNodeOUs</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 如果为 true，则在 msp 目录下就会生成 config.yaml 文件</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Template</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 模板，根据默认的规则在 Org2 下生成 &#34;0 ~ Count-1&#34; 个peer节点</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">Count</span>:<span style="color:#bbb"> </span><span style="color:#099">2</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义生成 2 个 peer 节点（peer0.org2.example.com，peer1.org2.example.com）</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Users</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义创建普通用户的数量，管理员用户（Admin@org2.example.com）会默认创建</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">Count</span>:<span style="color:#bbb"> </span><span style="color:#099">1</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 创建一个普通用户（User1@org2.example.com）</span><span style="color:#bbb">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="13-生成组织关系和身份证书">1.3 生成组织关系和身份证书</h3>
<p>使用上面的配置文件，通过下面的命令就可以为 Fabric 网络生成指定的拓扑结构的组织和身份证书文件，存放的文件夹目录为<code>crypto-config</code>。由于我们测试网络为<code>first-network</code>，所以我们可以切换到该目录下，直接运行下面命令即可：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">cd</span> /opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network <span style="color:#998;font-style:italic"># 切换到 first-network 目录下</span>
cryptogen generate --config<span style="color:#000;font-weight:bold">=</span>./crypto-config.yaml --output ./crypto-config <span style="color:#998;font-style:italic"># 生成证书文件</span>
</code></pre></td></tr></table>
</div>
</div><p>运行完成后，会有如下输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000;font-weight:bold">[</span>root@localhost first-network<span style="color:#000;font-weight:bold">]</span><span style="color:#998;font-style:italic"># cryptogen generate --config=./crypto-config.yaml --output ./crypto-config</span>
org1.example.com
org2.example.com
</code></pre></td></tr></table>
</div>
</div><p>此时，各种配置文件已经生成，我们可以到 <code>crypto-config</code>目录下查看生成的证书目录结构，具体的各种文件的解释说明可以到文档<code>《Fabric CA 的介绍及使用》</code>中查看，这里就不再赘述。</p>
<h2 id="2-生成-orderer-服务启动的创世区块和-channel-等文件">2 生成 Orderer 服务启动的创世区块和 Channel 等文件</h2>
<p>Orderer 节点在启动时，可以指定使用提前生成的初始区块文件作为系统通道的初始配置，创世区块中包括了 Ordering 服务的相关配置信息以及联盟信息。创世区块可以使用<code>configtxgen</code>工具生成。生成的过程需要依赖<code>configtx.yaml</code>配置文件。其中<code>configtx.yaml</code>配置文件定义了整个网络中相关配置和拓扑结构信息。</p>
<h3 id="21-configtxgen工具的使用">2.1 <code>configtxgen</code>工具的使用</h3>
<p>这个工具同样的已经被我们安装到<code>$GOPATH/bin</code>目录下面了，我们使用<code>configtxgen --help</code>命令就能知道这个工具的使用方法及参数说明，该工具没有子命令，只有参数设置，具体解释如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">-asOrg &lt;string&gt; <span style="color:#998;font-style:italic"># 以指定的组织身份执行更新配置交易（如更新锚节点）的生成，意味着在写集合中只包含了该组织有权限操作的键值</span>
-channelCreateTxBaseProfile &lt;string&gt; <span style="color:#998;font-style:italic"># 指定排序系统通道当前状态的配置文件，以允许在通道创新交易（tx）生成期间修改非应用程序参数。仅与 &#39;outputCreateChannelTx&#39; 结合使用才有效</span>
-channelID &lt;string&gt; <span style="color:#998;font-style:italic"># 指定在生成创世区块等文件时使用到的通道的 ID</span>
-configPath &lt;string&gt; <span style="color:#998;font-style:italic"># 要使用的配置文件（configtx.yaml）的路径（如果已设置的话）</span>
-inspectBlock &lt;string&gt; <span style="color:#998;font-style:italic"># 打印指定路径下区块（Block）中包含的配置[解析块]</span>
-inspectChannelCreateTx &lt;string&gt; <span style="color:#998;font-style:italic"># 打印指定路径下交易（transaction ）中包含的配置 [解析交易]</span>
-outputAnchorPeersUpdate &lt;string&gt; <span style="color:#998;font-style:italic"># 创建更新锚节点的配置更新请求，需要同时使用 -asOrg 来指定组织身份</span>
-outputBlock &lt;string&gt; <span style="color:#998;font-style:italic"># 指定生成的创世区块（genesis.block）的路径（如果已设置的话）</span>
-outputCreateChannelTx &lt;string&gt; <span style="color:#998;font-style:italic"># 指定生成通道配置文件路径（如果已设置的话）</span>
-printOrg &lt;string&gt; <span style="color:#998;font-style:italic"># 将组织的定义打印为json,(对于手动向组件添加组织非常有用)</span>
-profile &lt;string&gt; <span style="color:#998;font-style:italic"># 指定配置模板，一般为 configtx.yaml 中的 Profiles 里边的配置项（默认为 SampleInsecureSolo）</span>
-version <span style="color:#998;font-style:italic"># 显示工具的版本信息</span>
</code></pre></td></tr></table>
</div>
</div><p>该工具的使用示例如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># 生成创世区块：指定配置为 TwoOrgsOrdererGenesis，通道ID为 byfn-sys-channel，生成的创世区块路径及名称为 ./channel-artifacts/genesis.block</span>
configtxgen -profile TwoOrgsOrdererGenesis -channelID byfn-sys-channel -outputBlock ./channel-artifacts/genesis.block
<span style="color:#998;font-style:italic"># 创建通道：指定配置为 TwoOrgsChannel，通道ID为 mychannel，通道配置文件路径为 ./channel-artifacts/channel.tx</span>
configtxgen -profile TwoOrgsChannel -outputCreateChannelTx ./channel-artifacts/channel.tx -channelID mychannel
<span style="color:#998;font-style:italic"># 更新锚节点：指定配置为 TwoOrgsChannel，通道ID为 mychannel，更新锚节点的组织为Org1，MSP为 Org1MSP，指定锚节点更新配置输出文件路径为 ./channel-artifacts/Org1MSPanchors.tx</span>
configtxgen -profile TwoOrgsChannel -outputAnchorPeersUpdate ./channel-artifacts/Org1MSPanchors.tx -channelID mychannel -asOrg Org1MSP
</code></pre></td></tr></table>
</div>
</div><h3 id="22-configtxyaml配置文件解析">2.2 <code>configtx.yaml</code>配置文件解析</h3>
<blockquote>
<p><code>YAML</code>文件注释：<code>-</code>表示数组，<code>&amp;</code>表示锚点，<code>*</code>表示引用，<code>&lt;&lt;</code>表示合并到当前数据</p>
</blockquote>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">175
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">176
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">177
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">178
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">179
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">180
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">181
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">182
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">183
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">184
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">185
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">186
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">187
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">188
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">189
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">190
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">191
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">192
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">193
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">194
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">195
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">196
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">197
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">198
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">199
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">200
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">201
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">202
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">203
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">204
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">205
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">206
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">207
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">208
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">209
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">210
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">211
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">212
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">213
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">214
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">215
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">216
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">217
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">218
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">219
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">220
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">221
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">222
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">223
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">224
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">225
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">226
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">227
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">228
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">229
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">230
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">231
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">232
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">233
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">234
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">235
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">236
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">237
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">238
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">239
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">240
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">241
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">242
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">243
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">244
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">245
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">246
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">247
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">248
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">249
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">250
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">251
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">252
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">253
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">254
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">255
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">256
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">257
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">258
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">259
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">260
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">261
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">262
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">263
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">264
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">265
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">266
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">267
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">268
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">269
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">270
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">271
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">272
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">273
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">274
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">275
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">276
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">277
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">278
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">279
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">280
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">281
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">282
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">283
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">284
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">285
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">286
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">287
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">288
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">289
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">290
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">291
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">292
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">293
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">294
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">295
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">296
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">297
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">298
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">299
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">300
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">301
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">302
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">303
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">304
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">305
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">306
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">307
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">308
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">309
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">310
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">311
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">312
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">313
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">314
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">315
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">316
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">317
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">318
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">319
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">320
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">321
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">322
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">323
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">324
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">325
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">326
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">327
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">328
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">329
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">330
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">331
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">332
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">333
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   组织部分：</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   - 本节定义了稍后将在配置中引用的不同组织的标识</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 组织定义配置部分</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 定义排序服务（Orderer）组织</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>- <span style="color:#999;font-weight:bold;font-style:italic">&amp;OrdererOrg</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># &amp;OrdererOrg 这个用法类似指针，此处是被 Profiles 中的 - *OrdererOrg 所引用，下面还有很多类型的用例</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Name</span>:<span style="color:#bbb"> </span>OrdererOrg<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># Orderer 排序节点组织的名称</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">ID</span>:<span style="color:#bbb"> </span>OrdererMSP<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># Orderer 排序节点组织的ID,也就是本地MSP的名称（这是引用组织的关键）</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">MSPDir</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/msp<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># Orderer 排序节点组织的 MSP 证书文件目录路径</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 定义本层级的应用控制策略，对于排序节点（Orderer）的策略，其权威路径为：/Channel/&lt;Application|Orderer&gt;/&lt;OrgName&gt;/&lt;PolicyName&gt;</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Policies</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Readers</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 可读</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>Signature<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;OR(&#39;OrdererMSP.member&#39;)&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Writers</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 可写</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>Signature<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;OR(&#39;OrdererMSP.member&#39;)&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Admins</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 管理员 admin</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>Signature<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;OR(&#39;OrdererMSP.admin&#39;)&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>- <span style="color:#999;font-weight:bold;font-style:italic">&amp;Org1</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义组织1（Org1）</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Name</span>:<span style="color:#bbb"> </span>Org1MSP<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 组织1（Org1） 的名称</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">ID</span>:<span style="color:#bbb"> </span>Org1MSP<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 组织1（Org1） 的ID，也就是 localMSP 的名称</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">MSPDir</span>:<span style="color:#bbb"> </span>crypto-config/peerOrganizations/org1.example.com/msp<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 组织1（Org1）的 MSP 证书文件目录路径</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 定义本层级的应用控制策略，对于组织1（Org1）的策略，其权威路径为：/Channel/&lt;Application|Orderer&gt;/&lt;OrgName&gt;/&lt;PolicyName&gt;</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Policies</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Readers</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 可读</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>Signature<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;OR(&#39;Org1MSP.admin&#39;, &#39;Org1MSP.peer&#39;, &#39;Org1MSP.client&#39;)&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Writers</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 可写</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>Signature<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;OR(&#39;Org1MSP.admin&#39;, &#39;Org1MSP.client&#39;)&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Admins</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 管理员 admin</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>Signature<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;OR(&#39;Org1MSP.admin&#39;)&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">         </span><span style="color:#998;font-style:italic"># 定义组织1的锚节点，用于跨组织进行 Gossip 通信</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">AnchorPeers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>peer0.org1.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 锚节点的主机名（域名）</span><span style="color:#bbb">
</span><span style="color:#bbb">              </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">7051</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 锚节点的端口号</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span>- <span style="color:#999;font-weight:bold;font-style:italic">&amp;Org2</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义组织2（Org2）</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Name</span>:<span style="color:#bbb"> </span>Org2MSP<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 组织2（Org2） 的名称</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">ID</span>:<span style="color:#bbb"> </span>Org2MSP<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 组织2（Org2） 的ID，也就是 localMSP 的名称</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">MSPDir</span>:<span style="color:#bbb"> </span>crypto-config/peerOrganizations/org2.example.com/msp<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 组织2（Org2）的 MSP 证书文件目录路径</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 定义本层级的应用控制策略，对于组织2（Org2）的策略，其权威路径为：/Channel/&lt;Application|Orderer&gt;/&lt;OrgName&gt;/&lt;PolicyName&gt;</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Policies</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Readers</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 可读</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>Signature<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;OR(&#39;Org2MSP.admin&#39;, &#39;Org2MSP.peer&#39;, &#39;Org2MSP.client&#39;)&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Writers</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 可写</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>Signature<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;OR(&#39;Org2MSP.admin&#39;, &#39;Org2MSP.client&#39;)&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Admins</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 管理员 admin</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>Signature<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;OR(&#39;Org2MSP.admin&#39;)&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 定义组织2的锚节点，用于跨组织进行 Gossip 通信</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">AnchorPeers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>peer0.org2.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 锚节点的主机名（域名）</span><span style="color:#bbb">
</span><span style="color:#bbb">              </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">9051</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 锚节点的端口号</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#  Capabilities 部分（这是在 v1.1.0 版本之后提出来的，不能用于在更早的版本上面）</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   - 本节定义了 fabric 网络的功能，这是 v1.1.0中一个新概念，不应该在 v1.0.x 的 peer 和</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#    orderer 中使用，Capabilities 定义了存在于结构二进制文件中的功能，以便该二进制文件安全的</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#    参与网络，如果添加新的 MSP 类型，则较新的二进制文件可能会识别并验证此类型的签名，而没有此</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#    支持的旧二进制文件将无法验证这些事务，这可能导致具有不同世界状态的不同版本的结构二进制文件。</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#    相反，为通道定义功能（Capabilities）会通知那些没有此功能的二进制文件，他们必须在升级之前</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#    停止处理事务，对于v1.0.x，如果定义了任何功能（Capabilities）[包括关闭所有的功能配置]，</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#    那么v1.0.1 的 peer 会主动崩溃</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">Capabilities</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 通道功能（Capabilities）适用于 orderer 节点和 peer 节点，并且必须得到两者的支持</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 将功能设置为 true 以要求它</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Channel</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">&amp;ChannelCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 通道（Channel）的 v1.4.2 是一个行为标记，已被确定为所有在v1.4,2版本运行的 orderers 和 peers</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 但与先前版本的 orderers 和 peers 不兼容</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">V1_4_2</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># Orderer功能（Capabilities）仅适用于排序节点，可以安全地与之前版本的 peers 一起使用</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 将功能设置为 true 以要求它</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Orderer</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">&amp;OrdererCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># Orderer的 v1.4.2 是一个行为标记，已被确认为所有在 v1.4.2 版本运行的 orderers 所需的行为标志，但与之前版本的orderers 不兼容</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 在启用 v1.4.2 版本的orderer功能之前，请确保通道上所有的排序节点（orderers）都为v1.4.2或更高版本。</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">V1_4_2</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 应用程序（Application）仅适用于 peer 节点网络，并且可以安全地与之前版本的 orderer 节点一起使用</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 将功能的值设置为 true 以使其需要</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Application</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">&amp;ApplicationCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 应用程序（Application）的 v1.4.2 版本启用了 Fabric 1.4.2 的新的非向后兼容功能和修复</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">V1_4_2</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 应用程序（Application）的 v1.3 版本启用了 Fabric 1.3 的新的非向后兼容功能和修复</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">V1_3</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 应用程序（Application）的 v1.2 版本启用了 Fabric 1.2 的新的非向后兼容功能和修复（如果设置了更高版本的功能，则无需设置此功能）</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">V1_2</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 应用程序（Application）的 v1.1 版本启用了 Fabric 1.1 的新的非向后兼容功能和修复（如果设置了更高版本的功能，则无需设置此功能）</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">V1_1</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">false</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   应用程序（Application）部分</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   - 这个部分定义了配置事务或创世区块应用相关的参数设置的值</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">Application</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">&amp;ApplicationDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># Organizations 是在网络的应用程序端定义为参与者的组织列表</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 定义本层级的应用控制策略，对于应用程序（application）策略，其权威路径为 /Channel/Application/&lt;PolicyName&gt;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Policies</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Readers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>ImplicitMeta<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;ANY Readers&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Writers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>ImplicitMeta<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;ANY Writers&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Admins</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>ImplicitMeta<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;MAJORITY Admins&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 指定功能能力（Capabilities）为上面定义的 ApplicationCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Capabilities</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ApplicationCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   Orderer 节点部分</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   - 本节定义了要为orderer节点的配置事务或创世区块的相关参数设置的值</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">Orderer</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">&amp;OrdererDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 要启动的 Orderer 节点的共识类型，现在可以选的是 solo，kafka，etcdraft</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">OrdererType</span>:<span style="color:#bbb"> </span>solo<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 这里使用的是 solo 模式</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># orderer 节点的服务地址，如果是集群，需要设置多个地址</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Addresses</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- orderer.example.com:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">#- orderer.example2.com:8050</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">#- orderer.example3.com:9050</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">#- orderer.example4.com:10050</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">#- orderer.example5.com:11050</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 区块打包的最大超时时间（到了该时间就要打包区块）</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">BatchTimeout</span>:<span style="color:#bbb"> </span>2s<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 区块打包的最大包含交易数</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">BatchSize</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 一个区块里最大的交易数（最大到了该数量就要打包区块）</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">MaxMessageCount</span>:<span style="color:#bbb"> </span><span style="color:#099">10</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 一个区块的最大字节数（任何时候都不能超过，最大到了该大小就要打包区块）</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">AbsoluteMaxBytes</span>:<span style="color:#bbb"> </span><span style="color:#099">99</span><span style="color:#bbb"> </span>MB<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 一个区块的建议字节数，如果一个交易消息的大小超过了该值，就会被放到一个更大的区块中去</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">PreferredMaxBytes</span>:<span style="color:#bbb"> </span><span style="color:#099">512</span><span style="color:#bbb"> </span>KB<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># kafka 共识的相关配置设置</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Kafka</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># kafka 的 brokens 服务地址，允许有多个</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 注意: 使用IP:端口(IP:port)表示法</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Brokers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span>- <span style="color:#099">127.0.0.1</span>:<span style="color:#099">9092</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 参与维护 Orderer 排序节点的组织，默认为空</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 定义本层级的应用控制策略，对于 Orderer 策略，其权威路径为：/Channel/Orderer/&lt;PolicyName&gt;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Policies</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Readers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>ImplicitMeta<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;ANY Readers&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Writers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>ImplicitMeta<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;ANY Writers&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Admins</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>ImplicitMeta<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;MAJORITY Admins&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># BlockValidation 配置项指定了哪些签名必须包含在区块中，以便对 peer 节点进行验证</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">BlockValidation</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>ImplicitMeta<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;ANY Writers&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   Channel 通道部分</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#    - 本节定义要写入创世区块或配置交易的通道参数</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">Channel</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">&amp;ChannelDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 定义本层级的应用控制策略，对于 Channel 策略，其权威路径为： /Channel/&lt;PolicyName&gt;</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Policies</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 谁可以调用(invoke)交付区块(Deliver)的 API</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Readers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>ImplicitMeta<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;ANY Readers&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 谁可以调用(invoke)广播区块(Broadcast)的 API</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Writers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>ImplicitMeta<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;ANY Writers&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 默认情况下，谁可以修改此配置级别的元素</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Admins</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Type</span>:<span style="color:#bbb"> </span>ImplicitMeta<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Rule</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#34;MAJORITY Admins&#34;</span><span style="color:#bbb">
</span><span style="color:#bbb">  
</span><span style="color:#bbb">   </span><span style="color:#998;font-style:italic"># Capabilities 配置描述应用层级的能力需求，这里直接引用前面 Capabilities 配置段中的 ChannelCapabilities 配置项</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">Capabilities</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ChannelCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   Profile 部分配置</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   - 本节定义用于 configtxgen 工具的配置入口，包含委员会（Consortiums）的配置入口。 Profile</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   部分的配置主要是引入上面五个部分的配置参数。 configtxen 工具通过调用 Profile 参数，可以</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">#   实现生成特点的区块文件</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#998;font-style:italic">################################################################################</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">Profiles</span>:<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 创建 Orderer 创世区块的相关参数配置（Solo共识），包含 orderer 和联盟（Consortiums）两个部分</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">TwoOrgsOrdererGenesis</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 合并引入 Channel 部分的配置</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ChannelDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 合并引入 Orderer 部分的配置</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Orderer</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*OrdererDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic"># 指定组织 配置为 OrdererOrg</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#999;font-weight:bold;font-style:italic">*OrdererOrg</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic"># 指定能力要求为 OrdererCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Capabilities</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*OrdererCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic">#定义 Orderer 所服务的联盟列表</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Consortiums</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic"># 指定联盟列表名称为 SampleConsortium</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">SampleConsortium</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#998;font-style:italic"># 定义联盟中的组织，这里为 Org1，Org2</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                    </span>- <span style="color:#999;font-weight:bold;font-style:italic">*Org1</span><span style="color:#bbb">
</span><span style="color:#bbb">                    </span>- <span style="color:#999;font-weight:bold;font-style:italic">*Org2</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 创建应用通道（Channel）的配置</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">TwoOrgsChannel</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 应用通道关联的联盟列表为 SampleConsortium</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Consortium</span>:<span style="color:#bbb"> </span>SampleConsortium<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 合并引入通道（Channel）配置</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ChannelDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#998;font-style:italic"># 合并引入 Application 的相关配置</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Application</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ApplicationDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic"># 初始加入通道的组织，这里为 Org1，Org2</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#999;font-weight:bold;font-style:italic">*Org1</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#999;font-weight:bold;font-style:italic">*Org2</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic"># 指定能力要求为 ApplicationCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Capabilities</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ApplicationCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 创建 Orderer 创世区块的相关参数配置（kafka 共识）</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 生成创世区块时，configtxgen 指定的 -profile 参数为 SampleDevModeKafka</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">SampleDevModeKafka</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ChannelDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Capabilities</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ChannelCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Orderer</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*OrdererDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">OrdererType</span>:<span style="color:#bbb"> </span>kafka<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Kafka</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Brokers</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- kafka.example.com:<span style="color:#099">9092</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span>- <span style="color:#999;font-weight:bold;font-style:italic">*OrdererOrg</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Capabilities</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*OrdererCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Application</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ApplicationDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span>- <span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*OrdererOrg</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Consortiums</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">SampleConsortium</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#999;font-weight:bold;font-style:italic">*Org1</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#999;font-weight:bold;font-style:italic">*Org2</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 创建 Orderer 创世区块的相关参数配置（raft 共识）</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#998;font-style:italic"># 生成创世区块时，configtxgen 指定的 -profile 参数为 SampleMultiNodeEtcdRaft</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">SampleMultiNodeEtcdRaft</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ChannelDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Capabilities</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ChannelCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Orderer</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*OrdererDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">OrdererType</span>:<span style="color:#bbb"> </span>etcdraft<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">EtcdRaft</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#998;font-style:italic"># 指定参与共识的 orderer 节点地址，端口，和证书文件</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Consenters</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>orderer.example.com<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ClientTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ServerTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>orderer2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ClientTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer2.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ServerTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer2.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>orderer3.example.com<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ClientTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer3.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ServerTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer3.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>orderer4.example.com<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ClientTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer4.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ServerTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer4.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>orderer5.example.com<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ClientTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer5.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ServerTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer5.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Addresses</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- orderer.example.com:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- orderer2.example.com:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- orderer3.example.com:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- orderer4.example.com:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- orderer5.example.com:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span>- <span style="color:#999;font-weight:bold;font-style:italic">*OrdererOrg</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Capabilities</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*OrdererCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Application</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ApplicationDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span>- <span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*OrdererOrg</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Consortiums</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">SampleConsortium</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#999;font-weight:bold;font-style:italic">*Org1</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#999;font-weight:bold;font-style:italic">*Org2</span><span style="color:#bbb">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="23-生成-orderer-服务启动的创世区块和-channel-等文件">2.3 生成 Orderer 服务启动的创世区块和 Channel 等文件</h3>
<h4 id="231-生成创世区块">2.3.1 生成创世区块</h4>
<p>通过如下命令指定使用<code>configtx.yaml</code>文件中定义的<code>TwoOrgsOrdererGenesis</code>模板，来生成 Orderer 服务系统通道的初始创世区块文件。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">cd</span> /opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network <span style="color:#998;font-style:italic"># 切换到 first-network 目录下</span>

<span style="color:#998;font-style:italic"># -profile 指定配置模板为 TwoOrgsOrdererGenesis；-outputBlock 指定生成的创世区块文件路径；-channelID 指定系统通道名称为 byfn-sys-channel</span>
configtxgen -profile TwoOrgsOrdererGenesis -outputBlock ./channel-artifacts/genesis.block -channelID byfn-sys-channel
</code></pre></td></tr></table>
</div>
</div><p>运行完成后，会有如下输出，可以看出 Orderer 共识使用的是 solo</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-25 21:38:20.012 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> main -&gt; INFO <span style="color:#099">002</span> Loading configuration
2019-07-25 21:38:20.080 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> completeInitialization -&gt; INFO <span style="color:#099">003</span> orderer type: solo
2019-07-25 21:38:20.080 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> Load -&gt; INFO <span style="color:#099">004</span> Loaded configuration: /opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network/configtx.yaml
2019-07-25 21:38:20.147 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> completeInitialization -&gt; INFO <span style="color:#099">005</span> orderer type: solo
2019-07-25 21:38:20.147 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> LoadTopLevel -&gt; INFO <span style="color:#099">006</span> Loaded configuration: /opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network/configtx.yaml
2019-07-25 21:38:20.159 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> doOutputBlock -&gt; INFO <span style="color:#099">007</span> Generating genesis block
2019-07-25 21:38:20.159 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> doOutputBlock -&gt; INFO <span style="color:#099">008</span> Writing genesis block
</code></pre></td></tr></table>
</div>
</div><p>(*) 生成的文件位于目录<code>channel-artifacts</code>下，我们可以通过下面的命令将<code>Block</code>详细内容导入到<code>json</code>文件中方便查看：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># -inspectBlock 指定打印配置的块路径为 channel-artifacts/genesis.block</span>
configtxgen -inspectBlock channel-artifacts/genesis.block &gt; channel-artifacts/genesis.block.json
</code></pre></td></tr></table>
</div>
</div><h4 id="232-生成新建应用通道的配置交易">2.3.2 生成新建应用通道的配置交易</h4>
<p>接下来我们需要使用如下命令新建应用通道（Channel）：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># -profile 指定配置模板为 TwoOrgsChannel；-outputCreateChannelTx 指定生成的通道文件路径；-channelID 指定通道名称为 mychannel</span>
configtxgen -profile TwoOrgsChannel -outputCreateChannelTx ./channel-artifacts/channel.tx -channelID mychannel
</code></pre></td></tr></table>
</div>
</div><p>运行完成后，会有如下输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-25 22:04:30.305 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> main -&gt; INFO <span style="color:#099">001</span> Loading configuration
2019-07-25 22:04:30.376 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> Load -&gt; INFO <span style="color:#099">002</span> Loaded configuration: /opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network/configtx.yaml
2019-07-25 22:04:30.451 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> completeInitialization -&gt; INFO <span style="color:#099">003</span> orderer type: solo
2019-07-25 22:04:30.451 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> LoadTopLevel -&gt; INFO <span style="color:#099">004</span> Loaded configuration: /opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network/configtx.yaml
2019-07-25 22:04:30.451 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> doOutputChannelCreateTx -&gt; INFO <span style="color:#099">005</span> Generating new channel configtx
2019-07-25 22:04:30.458 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> doOutputChannelCreateTx -&gt; INFO <span style="color:#099">006</span> Writing new channel tx
</code></pre></td></tr></table>
</div>
</div><h4 id="233-生成锚节点配置更新文件">2.3.3 生成锚节点配置更新文件</h4>
<p>通道创建完成之后，我们接着需要提前生成锚节点配置更新文件，生成命令如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># -profile 指定配置模板为 TwoOrgsChannel；-outputAnchorPeersUpdate 指定生成的锚节点配置更新文件路径；-channelID 指定通道名称为 mychannel；-asOrg 指定组织为 Org1MSP</span>
configtxgen -profile TwoOrgsChannel -outputAnchorPeersUpdate ./channel-artifacts/Org1MSPanchors.tx -channelID mychannel -asOrg Org1MSP

<span style="color:#998;font-style:italic"># -profile 指定配置模板为 TwoOrgsChannel；-outputAnchorPeersUpdate 指定生成的锚节点配置更新文件路径；-channelID 指定通道名称为 mychannel；-asOrg 指定组织为 Org2MSP</span>
configtxgen -profile TwoOrgsChannel -outputAnchorPeersUpdate ./channel-artifacts/Org2MSPanchors.tx -channelID mychannel -asOrg Org2MSP
</code></pre></td></tr></table>
</div>
</div><p>两条命令运行完成后，都会有如下输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-25 22:19:42.190 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> main -&gt; INFO <span style="color:#099">001</span> Loading configuration
2019-07-25 22:19:42.260 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> Load -&gt; INFO <span style="color:#099">002</span> Loaded configuration: /opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network/configtx.yaml
2019-07-25 22:19:42.324 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> completeInitialization -&gt; INFO <span style="color:#099">003</span> orderer type: solo
2019-07-25 22:19:42.325 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> LoadTopLevel -&gt; INFO <span style="color:#099">004</span> Loaded configuration: /opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network/configtx.yaml
2019-07-25 22:19:42.325 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> doOutputAnchorPeersUpdate -&gt; INFO <span style="color:#099">005</span> Generating anchor peer update
2019-07-25 22:19:42.325 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> doOutputAnchorPeersUpdate -&gt; INFO <span style="color:#099">006</span> Writing anchor peer update
</code></pre></td></tr></table>
</div>
</div><p>使用提前生成锚节点配置更新文件，组织管理员身份就可以更新指定应用通道中组织的锚节点配置。所谓的锚节点就是负责代表组织与其他组织中的节点进行 Gossip 通信的节点。</p>
<p>(*)我们也可以通过下面命令将上面生成的交易（transaction）文件导出到<code>json</code>文件中进行查看：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># -inspectChannelCreateTx 指定要解析的交易文件为 channel-artifacts/channel.tx</span>
configtxgen -inspectChannelCreateTx channel-artifacts/channel.tx &gt; channel-artifacts/channel.tx.json

<span style="color:#998;font-style:italic"># -inspectChannelCreateTx 指定要解析的交易文件为 channel-artifacts/Org1MSPanchors.tx</span>
configtxgen -inspectChannelCreateTx channel-artifacts/Org1MSPanchors.tx &gt; channel-artifacts/Org1MSPanchors.tx.json

<span style="color:#998;font-style:italic"># -inspectChannelCreateTx 指定要解析的交易文件为 channel-artifacts/Org2MSPanchors.tx</span>
configtxgen -inspectChannelCreateTx channel-artifacts/Org2MSPanchors.tx &gt; channel-artifacts/Org2MSPanchors.tx.json
</code></pre></td></tr></table>
</div>
</div><p>至此，所以文件都生成完成，我们可以在<code>channel-artifacts</code>目录下可以看到，生成的文件有：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">├── channel.tx <span style="color:#998;font-style:italic"># 应用通道的配置交易文件</span>
├── genesis.block <span style="color:#998;font-style:italic"># Ordering 服务启动的创世区块</span>
├── Org1MSPanchors.tx <span style="color:#998;font-style:italic"># 组织1的锚节点配置更新的配置交易文件</span>
└── Org2MSPanchors.tx <span style="color:#998;font-style:italic"># 组织2的锚节点配置更新的配置交易文件</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="3-使用-docker-容器方式启动-fabric-网络">3 使用 Docker 容器方式启动 Fabric 网络</h2>
<h3 id="31-所需的docker-compose启动文件介绍">3.1 所需的<code>docker-compose</code>启动文件介绍</h3>
<p>启动网络使用到了三个配置文件，他们具有继承和扩展等关系。使用到的配置文件是下面三个：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">base/peer-base.yaml
base/docker-compose-base.yaml
docker-compose-cli.yaml
</code></pre></td></tr></table>
</div>
</div><h4 id="311-peer-baseyaml文件解析">3.1.1 <code>peer-base.yaml</code>文件解析</h4>
<p>这个配置文件中定义了将要启动的容器(container)所使用的镜像(image)，并且定义了容器启动后自动执行的命令，具体配置详情如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000;font-weight:bold">version</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#39;2&#39;</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># 使用的是第2版 Compose 文件格式</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">services</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 服务</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer-base</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义一个名为 peer-base 的服务</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">image</span>:<span style="color:#bbb"> </span>hyperledger/fabric-peer:$IMAGE_TAG<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 该服务所依赖的镜像</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">environment</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义该服务的环境变量</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># Docker 服务地址</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_VM_DOCKER_HOSTCONFIG_NETWORKMODE=${COMPOSE_PROJECT_NAME}_byfn<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 链码容器使用的网络方式，这里是bridge方式</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- FABRIC_LOGGING_SPEC=INFO<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义日志级别为 INFO</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic">#- FABRIC_LOGGING_SPEC=DEBUG</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_TLS_ENABLED=<span style="color:#000;font-weight:bold">true</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 使用 TLS</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_GOSSIP_USELEADERELECTION=<span style="color:#000;font-weight:bold">true</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 使用选举 Leader 的方式</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_GOSSIP_ORGLEADER=<span style="color:#000;font-weight:bold">false</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 不指定 Leader</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_PROFILE_ENABLED=<span style="color:#000;font-weight:bold">true</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 使用 profile</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_TLS_CERT_FILE=/etc/hyperledger/fabric/tls/server.crt<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 在容器中的 TLS 的证书路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_TLS_KEY_FILE=/etc/hyperledger/fabric/tls/server.key<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 在容器中的 TLS 的秘钥路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_TLS_ROOTCERT_FILE=/etc/hyperledger/fabric/tls/ca.crt<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 在容器中的 TLS 的根证书路径</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">working_dir</span>:<span style="color:#bbb"> </span>/opt/gopath/src/github.com/hyperledger/fabric/peer<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 工作目录，即进入容器所在的默认位置</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">command</span>:<span style="color:#bbb"> </span>peer<span style="color:#bbb"> </span>node<span style="color:#bbb"> </span>start<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 启动容器后执行的第一条命令，启动 Peer 节点</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">orderer-base</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义一个名为 orderer-base 的服务</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">image</span>:<span style="color:#bbb"> </span>hyperledger/fabric-orderer:$IMAGE_TAG<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 指定该服务依赖的镜像</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">environment</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义该服务的环境变量</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- FABRIC_LOGGING_SPEC=INFO<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义日志级别为 INFO</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- ORDERER_GENERAL_LISTENADDRESS=<span style="color:#099">0.0.0.0</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># orderer 节点的监听地址</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- ORDERER_GENERAL_GENESISMETHOD=file<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 创世区块文件的类型为 file</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- ORDERER_GENERAL_GENESISFILE=/var/hyperledger/orderer/orderer.genesis.block<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 指定创世区块在容器中的路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- ORDERER_GENERAL_LOCALMSPID=OrdererMSP<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># Orderer 的本地 MSP ID</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- ORDERER_GENERAL_LOCALMSPDIR=/var/hyperledger/orderer/msp<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 在容器中的本地的MSP文件夹路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- ORDERER_GENERAL_TLS_ENABLED=<span style="color:#000;font-weight:bold">true</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 使用 TLS</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- ORDERER_GENERAL_TLS_PRIVATEKEY=/var/hyperledger/orderer/tls/server.key<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 在容器中的 TLS 的秘钥路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- ORDERER_GENERAL_TLS_CERTIFICATE=/var/hyperledger/orderer/tls/server.crt<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 在容器中的 TLS 的证书路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- ORDERER_GENERAL_TLS_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 在容器中的 TLS 的根证书路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic"># 以下为kafka集群的配置，没有使用到</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic">#- ORDERER_KAFKA_TOPIC_REPLICATIONFACTOR=1</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic">#- ORDERER_KAFKA_VERBOSE=true</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic">#- ORDERER_GENERAL_CLUSTER_CLIENTCERTIFICATE=/var/hyperledger/orderer/tls/server.crt</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic">#- ORDERER_GENERAL_CLUSTER_CLIENTPRIVATEKEY=/var/hyperledger/orderer/tls/server.key</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic">#- ORDERER_GENERAL_CLUSTER_ROOTCAS=[/var/hyperledger/orderer/tls/ca.crt]</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">working_dir</span>:<span style="color:#bbb"> </span>/opt/gopath/src/github.com/hyperledger/fabric<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 工作目录，即进入容器所在的默认位置</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">command</span>:<span style="color:#bbb"> </span>orderer<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 启动容器后执行的第一条命令，启动 Orderer 节点</span><span style="color:#bbb">
</span></code></pre></td></tr></table>
</div>
</div><h4 id="312-docker-compose-baseyaml文件解析">3.1.2 <code>docker-compose-base.yaml</code>文件解析</h4>
<p>这个配置文件中定义了五个容器，分别是<code>orderer.example.com</code>、<code>peer0.org1.example.com</code>、<code>peer1.org1.example.com</code>、<code>peer0.org2.example.com</code>、<code>peer1.org2.example.com</code>，其中一个<code>orderer</code>节点配置继承自 <code>peer-base.yaml</code>中的<code>orderer-base</code>服务；四个<code>peer</code>节点配置继承自<code>peer-base.yaml</code>中的<code>peer-base</code>服务。具体详细配置如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000;font-weight:bold">version</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#39;2&#39;</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 使用的是第2版 Compose 文件格式</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">services</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 服务，包含多个容器实例</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">orderer.example.com</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义一个名为 orderer.example.com 的服务</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">container_name</span>:<span style="color:#bbb"> </span>orderer.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 容器名称</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">extends</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展，代表要加载的文件或服务</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">file</span>:<span style="color:#bbb"> </span>peer-base.yaml<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展的文件名</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">service</span>:<span style="color:#bbb"> </span>orderer-base<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展的服务名称</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">volumes</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 挂载的卷 [本机路径下的目录或文件]：[容器中所映射到的地址]</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ../channel-artifacts/genesis.block:/var/hyperledger/orderer/orderer.genesis.block<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 映射创世区块到容器中</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ../crypto-config/ordererOrganizations/example.com/orderers/orderer.example.com/msp:/var/hyperledger/orderer/msp<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 映射 orderer 节点的 msp 文件目录到容器中</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ../crypto-config/ordererOrganizations/example.com/orderers/orderer.example.com/tls/:/var/hyperledger/orderer/tls<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 映射 orderer 节点的 tls 文件目录到容器中</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- orderer.example.com:/var/hyperledger/production/orderer<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">ports</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 所映射的端口 [本机端口]：[容器端口]</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#099">7050</span>:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer0.org1.example.com</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义一个名为 peer0.org1.example.com 的服务</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">container_name</span>:<span style="color:#bbb"> </span>peer0.org1.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 容器名称</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">extends</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">file</span>:<span style="color:#bbb"> </span>peer-base.yaml<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展的文件名</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">service</span>:<span style="color:#bbb"> </span>peer-base<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展的服务名称</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">environment</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义该服务的环境变量</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_ID=peer0.org1.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># peer 节点的 ID</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_ADDRESS=peer0.org1.example.com:<span style="color:#099">7051</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># peer 节点的访问路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_LISTENADDRESS=<span style="color:#099">0.0.0.0</span>:<span style="color:#099">7051</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># peer 节点的监听路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_CHAINCODEADDRESS=peer0.org1.example.com:<span style="color:#099">7052</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># peer 节点的链码访问地址</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_CHAINCODELISTENADDRESS=<span style="color:#099">0.0.0.0</span>:<span style="color:#099">7052</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># peer 节点的链码监听地址，指定为 0.0.0.0 则自动进行探测</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_GOSSIP_BOOTSTRAP=peer1.org1.example.com:<span style="color:#099">8051</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 指定用于在本组织内引导 Gossip 通信的节点</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0.org1.example.com:<span style="color:#099">7051</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># Gossip 通信的外部节点，既为本组织的锚节点</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_LOCALMSPID=Org1MSP<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 所属组织的 MSP 的 ID</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">volumes</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 挂载的卷 [本机路径下的目录或文件]：[容器中所映射到的地址]</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- /var/run/:/host/var/run/<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ../crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/msp:/etc/hyperledger/fabric/msp<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 映射 peer0.org1.example.com 节点的 msp 文件目录到容器中</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ../crypto-config/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls:/etc/hyperledger/fabric/tls<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 映射 peer0.org1.example.com 节点的 tls 文件目录到容器中</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- peer0.org1.example.com:/var/hyperledger/production<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">ports</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 所映射的端口 [本机端口]：[容器端口]</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#099">7051</span>:<span style="color:#099">7051</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic">## 下面定义的 peer 服务的相关参数解释与 peer0.org1.example.com 相似</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer1.org1.example.com</span>:<span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># 定义一个名为 peer1.org1.example.com 的服务</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">container_name</span>:<span style="color:#bbb"> </span>peer1.org1.example.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">extends</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">file</span>:<span style="color:#bbb"> </span>peer-base.yaml<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">service</span>:<span style="color:#bbb"> </span>peer-base<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">environment</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_ID=peer1.org1.example.com<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_ADDRESS=peer1.org1.example.com:<span style="color:#099">8051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_LISTENADDRESS=<span style="color:#099">0.0.0.0</span>:<span style="color:#099">8051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_CHAINCODEADDRESS=peer1.org1.example.com:<span style="color:#099">8052</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_CHAINCODELISTENADDRESS=<span style="color:#099">0.0.0.0</span>:<span style="color:#099">8052</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1.org1.example.com:<span style="color:#099">8051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_GOSSIP_BOOTSTRAP=peer0.org1.example.com:<span style="color:#099">7051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_LOCALMSPID=Org1MSP<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">volumes</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- /var/run/:/host/var/run/<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ../crypto-config/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/msp:/etc/hyperledger/fabric/msp<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ../crypto-config/peerOrganizations/org1.example.com/peers/peer1.org1.example.com/tls:/etc/hyperledger/fabric/tls<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- peer1.org1.example.com:/var/hyperledger/production<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">ports</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#099">8051</span>:<span style="color:#099">8051</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer0.org2.example.com</span>:<span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># 定义一个名为 peer0.org2.example.com 的服务</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">container_name</span>:<span style="color:#bbb"> </span>peer0.org2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">extends</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">file</span>:<span style="color:#bbb"> </span>peer-base.yaml<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">service</span>:<span style="color:#bbb"> </span>peer-base<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">environment</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_ID=peer0.org2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_ADDRESS=peer0.org2.example.com:<span style="color:#099">9051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_LISTENADDRESS=<span style="color:#099">0.0.0.0</span>:<span style="color:#099">9051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_CHAINCODEADDRESS=peer0.org2.example.com:<span style="color:#099">9052</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_CHAINCODELISTENADDRESS=<span style="color:#099">0.0.0.0</span>:<span style="color:#099">9052</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer0.org2.example.com:<span style="color:#099">9051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_GOSSIP_BOOTSTRAP=peer1.org2.example.com:<span style="color:#099">10051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_LOCALMSPID=Org2MSP<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">volumes</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- /var/run/:/host/var/run/<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ../crypto-config/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/msp:/etc/hyperledger/fabric/msp<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ../crypto-config/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls:/etc/hyperledger/fabric/tls<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- peer0.org2.example.com:/var/hyperledger/production<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">ports</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#099">9051</span>:<span style="color:#099">9051</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer1.org2.example.com</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义一个名为 peer1.org2.example.com 的服务</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">container_name</span>:<span style="color:#bbb"> </span>peer1.org2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">extends</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">file</span>:<span style="color:#bbb"> </span>peer-base.yaml<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">service</span>:<span style="color:#bbb"> </span>peer-base<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">environment</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_ID=peer1.org2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_ADDRESS=peer1.org2.example.com:<span style="color:#099">10051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_LISTENADDRESS=<span style="color:#099">0.0.0.0</span>:<span style="color:#099">10051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_CHAINCODEADDRESS=peer1.org2.example.com:<span style="color:#099">10052</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_CHAINCODELISTENADDRESS=<span style="color:#099">0.0.0.0</span>:<span style="color:#099">10052</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_GOSSIP_EXTERNALENDPOINT=peer1.org2.example.com:<span style="color:#099">10051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_GOSSIP_BOOTSTRAP=peer0.org2.example.com:<span style="color:#099">9051</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_LOCALMSPID=Org2MSP<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">volumes</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- /var/run/:/host/var/run/<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ../crypto-config/peerOrganizations/org2.example.com/peers/peer1.org2.example.com/msp:/etc/hyperledger/fabric/msp<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ../crypto-config/peerOrganizations/org2.example.com/peers/peer1.org2.example.com/tls:/etc/hyperledger/fabric/tls<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- peer1.org2.example.com:/var/hyperledger/production<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">ports</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- <span style="color:#099">10051</span>:<span style="color:#099">10051</span><span style="color:#bbb">
</span></code></pre></td></tr></table>
</div>
</div><h4 id="313-docker-compose-cliyaml文件解析">3.1.3 <code>docker-compose-cli.yaml</code>文件解析</h4>
<p>这个配置文件扩展了<code>docker-compose-base.yaml</code>中的内容，并指定了<code>docker</code> 容器所加入的网络<code>networks</code>为<code>byfn</code>。而且还启动了一个客户端(<code>cli</code>)容器，这是一个<code>fabric</code>工具集容器，我们会登录这个容器和 fabric 各个节点进行交互和操作。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">90
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000;font-weight:bold">version</span>:<span style="color:#bbb"> </span><span style="color:#d14">&#39;2&#39;</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># 使用的是第2版 Compose 文件格式</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">volumes</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 声明要挂载的卷，既 1 orderer + 4 peer</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">orderer.example.com</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer0.org1.example.com</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer1.org1.example.com</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer0.org2.example.com</span>:<span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer1.org2.example.com</span>:<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">networks</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 声明一个名称为 byfn 的网络</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">byfn</span>:<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb"></span><span style="color:#000;font-weight:bold">services</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 声明服务，包含多个容器实例</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">orderer.example.com</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义一个名为 orderer.example.com 的服务</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">extends</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">file</span>:<span style="color:#bbb">   </span>base/docker-compose-base.yaml<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展的文件名</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">service</span>:<span style="color:#bbb"> </span>orderer.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展的服务名称</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">container_name</span>:<span style="color:#bbb"> </span>orderer.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 容器名称</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">networks</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 指定容器加入的网络，如果需要加入多个网络，可以定义多个</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- byfn<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer0.org1.example.com</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义一个名为 peer0.org1.example.com 的服务</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">container_name</span>:<span style="color:#bbb"> </span>peer0.org1.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 容器名称</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">extends</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">file</span>:<span style="color:#bbb">  </span>base/docker-compose-base.yaml<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展的文件名</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">service</span>:<span style="color:#bbb"> </span>peer0.org1.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 扩展的服务名称</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">networks</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 指定容器加入的网络</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- byfn<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#998;font-style:italic"># 下面 peer 节点相关参数与上类似</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer1.org1.example.com</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">container_name</span>:<span style="color:#bbb"> </span>peer1.org1.example.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">extends</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">file</span>:<span style="color:#bbb">  </span>base/docker-compose-base.yaml<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">service</span>:<span style="color:#bbb"> </span>peer1.org1.example.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">networks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- byfn<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer0.org2.example.com</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">container_name</span>:<span style="color:#bbb"> </span>peer0.org2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">extends</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">file</span>:<span style="color:#bbb">  </span>base/docker-compose-base.yaml<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">service</span>:<span style="color:#bbb"> </span>peer0.org2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">networks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- byfn<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">peer1.org2.example.com</span>:<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">container_name</span>:<span style="color:#bbb"> </span>peer1.org2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">extends</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">file</span>:<span style="color:#bbb">  </span>base/docker-compose-base.yaml<span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#000;font-weight:bold">service</span>:<span style="color:#bbb"> </span>peer1.org2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">networks</span>:<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- byfn<span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">  </span><span style="color:#000;font-weight:bold">cli</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义一个客户端服务，方便与各个节点进行交互</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">container_name</span>:<span style="color:#bbb"> </span>cli<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 容器名称为 cli</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">image</span>:<span style="color:#bbb"> </span>hyperledger/fabric-tools:$IMAGE_TAG<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 使用到的镜像为 fabric-tools</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">tty</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 使用伪终端</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">stdin_open</span>:<span style="color:#bbb"> </span><span style="color:#000;font-weight:bold">true</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 标准输入</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">environment</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义该服务的环境变量</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- SYS_CHANNEL=$SYS_CHANNEL<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 系统通道名称</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- GOPATH=/opt/gopath<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 指定 GOPATH 路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_VM_ENDPOINT=unix:///host/var/run/docker.sock<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># Docker 服务地址</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span><span style="color:#998;font-style:italic">#- FABRIC_LOGGING_SPEC=DEBUG</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- FABRIC_LOGGING_SPEC=INFO<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 日志级别为 INFO</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_ID=cli<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 当前节点的 ID 为 cli</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_ADDRESS=peer0.org1.example.com:<span style="color:#099">7051</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 以下与 peer-base.yaml 相同，表示当前客户端容器默认与 peer0.org1.example.com 进行交互</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_LOCALMSPID=Org1MSP<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 组织1的本地MSP的ID</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_TLS_ENABLED=<span style="color:#000;font-weight:bold">true</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 使用 TLS</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_TLS_CERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.crt<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># peer0.org1.example.com 节点的 TLS 证书路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_TLS_KEY_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/server.key<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># peer0.org1.example.com 节点的 TLS 密钥路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_TLS_ROOTCERT_FILE=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># peer0.org1.example.com 节点的 TLS 根证书路径</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- CORE_PEER_MSPCONFIGPATH=/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 组织1中的管理员（Admin@org1.example.com）的MSP文件目录路径</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">working_dir</span>:<span style="color:#bbb"> </span>/opt/gopath/src/github.com/hyperledger/fabric/peer<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 工作目录，进入容器所在的默认位置</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">command</span>:<span style="color:#bbb"> </span>/bin/bash<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 启动容器后运行的第一条命令：使用 bash</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">volumes</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 挂载的卷 [本机路径下的目录或文件]：[容器中所映射到的地址]</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- /var/run/:/host/var/run/<span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ./../chaincode/:/opt/gopath/src/github.com/chaincode<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 映射链码文件夹路径</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ./crypto-config:/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 映射证书文件夹路径</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ./scripts:/opt/gopath/src/github.com/hyperledger/fabric/peer/scripts/<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 映射的脚本文件夹路径</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span>- ./channel-artifacts:/opt/gopath/src/github.com/hyperledger/fabric/peer/channel-artifacts<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 映射的创世区块和应用通道等文件目录路径</span><span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">depends_on</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 依赖，需要首先按顺序启动以下容器服务，但是不会等待以下容器完全启动才启动当前容器</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- orderer.example.com<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- peer0.org1.example.com<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- peer1.org1.example.com<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- peer0.org2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">      </span>- peer1.org2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">    </span><span style="color:#000;font-weight:bold">networks</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 指定当前容器所加入的网络</span><span style="color:#bbb">
</span><span style="color:#bbb">      </span>- byfn<span style="color:#bbb">
</span></code></pre></td></tr></table>
</div>
</div><h3 id="32-启动-fabric-网络中的-ordererpeer-和-cli-容器服务">3.2 启动 Fabric 网络中的 Orderer、peer 和 cli 容器服务</h3>
<p>当所有的配置文件定义好之后，我们就可以使用<code>docker-compose</code>工具来启动所有容器了，启动命令如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># 如果不在 first-network 目录下，要进入该目录下</span>
<span style="color:#0086b3">cd</span> /opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network
<span style="color:#998;font-style:italic"># -f(--file)指定使用的 Compose 模板文件，up 启动配置文件中定义的所有服务容器，-d 在后台运行服务容器</span>
docker-compose -f docker-compose-cli.yaml up -d
</code></pre></td></tr></table>
</div>
</div><p>该命令执行完成之后，会有如下输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000;font-weight:bold">[</span>root@localhost first-network<span style="color:#000;font-weight:bold">]</span><span style="color:#998;font-style:italic"># docker-compose -f docker-compose-cli.yaml up -d</span>
Creating network <span style="color:#d14">&#34;net_byfn&#34;</span> with the default driver
Creating volume <span style="color:#d14">&#34;net_peer0.org2.example.com&#34;</span> with default driver
Creating volume <span style="color:#d14">&#34;net_peer1.org2.example.com&#34;</span> with default driver
Creating volume <span style="color:#d14">&#34;net_peer1.org1.example.com&#34;</span> with default driver
Creating volume <span style="color:#d14">&#34;net_peer0.org1.example.com&#34;</span> with default driver
Creating volume <span style="color:#d14">&#34;net_orderer.example.com&#34;</span> with default driver
Creating peer0.org1.example.com ... <span style="color:#000;font-weight:bold">done</span>
Creating peer1.org1.example.com ... <span style="color:#000;font-weight:bold">done</span>
Creating peer0.org2.example.com ... <span style="color:#000;font-weight:bold">done</span>
Creating orderer.example.com    ... <span style="color:#000;font-weight:bold">done</span>
Creating peer1.org2.example.com ... <span style="color:#000;font-weight:bold">done</span>
Creating cli                    ... <span style="color:#000;font-weight:bold">done</span>
</code></pre></td></tr></table>
</div>
</div><p>我们可以使用<code>docker ps</code>命令来查看后台启动的所有容器，具体如下。我们可以看到，在后台已经有一个 cli 容器，一个 orderer 容器，四个 peer 容器启动了。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000;font-weight:bold">[</span>root@localhost first-network<span style="color:#000;font-weight:bold">]</span><span style="color:#998;font-style:italic"># docker ps</span>
CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS              PORTS                      NAMES
7ddf52548cfd        hyperledger/fabric-tools:latest     <span style="color:#d14">&#34;/bin/bash&#34;</span>         <span style="color:#099">6</span> minutes ago       Up <span style="color:#099">6</span> minutes                                   cli
a495b24483dc        hyperledger/fabric-orderer:latest   <span style="color:#d14">&#34;orderer&#34;</span>           <span style="color:#099">6</span> minutes ago       Up <span style="color:#099">6</span> minutes        0.0.0.0:7050-&gt;7050/tcp     orderer.example.com
5349a515df51        hyperledger/fabric-peer:latest      <span style="color:#d14">&#34;peer node start&#34;</span>   <span style="color:#099">6</span> minutes ago       Up <span style="color:#099">6</span> minutes        0.0.0.0:10051-&gt;10051/tcp   peer1.org2.example.com
a8a579ebd979        hyperledger/fabric-peer:latest      <span style="color:#d14">&#34;peer node start&#34;</span>   <span style="color:#099">6</span> minutes ago       Up <span style="color:#099">6</span> minutes        0.0.0.0:7051-&gt;7051/tcp     peer0.org1.example.com
5614be188b35        hyperledger/fabric-peer:latest      <span style="color:#d14">&#34;peer node start&#34;</span>   <span style="color:#099">6</span> minutes ago       Up <span style="color:#099">6</span> minutes        0.0.0.0:9051-&gt;9051/tcp     peer0.org2.example.com
d6672dcc70d4        hyperledger/fabric-peer:latest      <span style="color:#d14">&#34;peer node start&#34;</span>   <span style="color:#099">6</span> minutes ago       Up <span style="color:#099">6</span> minutes        0.0.0.0:8051-&gt;8051/tcp     peer1.org1.example.com
</code></pre></td></tr></table>
</div>
</div><h2 id="4-创建加入通道更新锚节点">4 创建、加入通道，更新锚节点</h2>
<h3 id="41-创建通道操作">4.1 创建通道操作</h3>
<p>当所有容器启动完成之后，我们就可以进入容器，进行创建通道等操作了。首先我们需要使用如下命令进入客户端容器：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker <span style="color:#0086b3">exec</span> -it cli bash
</code></pre></td></tr></table>
</div>
</div><p>执行完成之后，我们可以看到光标会变成如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000;font-weight:bold">[</span>root@localhost first-network<span style="color:#000;font-weight:bold">]</span><span style="color:#998;font-style:italic"># docker exec -it cli bash</span>
root@7ddf52548cfd:/opt/gopath/src/github.com/hyperledger/fabric/peer# <span style="color:#998;font-style:italic"># 光标所在位置</span>
</code></pre></td></tr></table>
</div>
</div><p>接着先将<code>Orderer</code>的<code>tlsca</code>证书文件路径写入环境变量：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">export</span> <span style="color:#008080">ORDERER_CA</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
</code></pre></td></tr></table>
</div>
</div><p>执行下面命令，创建通道：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># channel create 创建一个新通道，-o 指定orderer节点地址，-c 指定生成的通道ID -f 指定新建应用通道的配置交易文件 --tls 使用TLS，--cafile 指定 tls 的证书文件路径</span>
peer channel create -o orderer.example.com:7050 -c mychannel -f ./channel-artifacts/channel.tx --tls <span style="color:#0086b3">true</span> --cafile <span style="color:#008080">$ORDERER_CA</span>
</code></pre></td></tr></table>
</div>
</div><p>执行完成之后，会有如下输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-26 12:36:53.557 UTC <span style="color:#000;font-weight:bold">[</span>channelCmd<span style="color:#000;font-weight:bold">]</span> InitCmdFactory -&gt; INFO <span style="color:#099">001</span> Endorser and orderer connections initialized
2019-07-26 12:36:53.632 UTC <span style="color:#000;font-weight:bold">[</span>cli.common<span style="color:#000;font-weight:bold">]</span> readBlock -&gt; INFO <span style="color:#099">002</span> Received block: <span style="color:#099">0</span>
</code></pre></td></tr></table>
</div>
</div><p>(*) 我们使用 <code>ll</code>命令可以看到，该目录下多了一个<code>mychannel.block</code>文件，我们可以使用如下命令将其移动到 <code>channel-artifacts</code>文件夹下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">mv mychannel.block channel-artifacts/
</code></pre></td></tr></table>
</div>
</div><p>(*) 我们还可以使用如下命令将生成的通道文件解析成<code>json</code>格式的文件方便查看：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">configtxgen -inspectBlock channel-artifacts/mychannel.block &gt; channel-artifacts/mychannel.json
</code></pre></td></tr></table>
</div>
</div><h3 id="42-加入通道">4.2 加入通道</h3>
<p>创建通道完成之后，我们需要将所有节点都加入到该通道中</p>
<h4 id="421-peer0org1examplecom节点加入通道">4.2.1 <code>peer0.org1.example.com</code>节点加入通道</h4>
<p>先配置环境变量，由于<code>peer0.org1.example.com</code>节点是默认与<code>cli</code>容器连接的，所有可以不必配置环境变量，但是为与其他节点加入通道流程一致，这里也配置一下环境变量：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_LOCALMSPID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Org1MSP&#34;</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_TLS_ROOTCERT_FILE</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_MSPCONFIGPATH</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_ADDRESS</span><span style="color:#000;font-weight:bold">=</span>peer0.org1.example.com:7051
</code></pre></td></tr></table>
</div>
</div><p>执行下面命令，加入通道：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># channel join 加入通道，-b 通道的区块文件</span>
peer channel join -b channel-artifacts/mychannel.block
</code></pre></td></tr></table>
</div>
</div><p>执行完成后，会有如下输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">root@7ddf52548cfd:/opt/gopath/src/github.com/hyperledger/fabric/peer# peer channel join -b channel-artifacts/mychannel.block
2019-07-26 13:04:33.273 UTC <span style="color:#000;font-weight:bold">[</span>channelCmd<span style="color:#000;font-weight:bold">]</span> InitCmdFactory -&gt; INFO <span style="color:#099">001</span> Endorser and orderer connections initialized
2019-07-26 13:04:33.349 UTC <span style="color:#000;font-weight:bold">[</span>channelCmd<span style="color:#000;font-weight:bold">]</span> executeJoin -&gt; INFO <span style="color:#099">002</span> Successfully submitted proposal to join channel
</code></pre></td></tr></table>
</div>
</div><h4 id="422-peer1org1examplecom节点加入通道">4.2.2 <code>peer1.org1.example.com</code>节点加入通道</h4>
<p>配置环境变量：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_LOCALMSPID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Org1MSP&#34;</span>
<span style="color:#008080">CORE_PEER_TLS_ROOTCERT_FILE</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_MSPCONFIGPATH</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_ADDRESS</span><span style="color:#000;font-weight:bold">=</span>peer1.org1.example.com:8051
</code></pre></td></tr></table>
</div>
</div><p>执行下面命令，加入通道，执行完成后，输出内容与<code>peer0.org1.example.com</code>的相同</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer channel join -b channel-artifacts/mychannel.block
</code></pre></td></tr></table>
</div>
</div><h4 id="423-peer0org2examplecom节点加入通道">4.2.3 <code>peer0.org2.example.com</code>节点加入通道</h4>
<p>配置环境变量：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_LOCALMSPID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Org2MSP&#34;</span>
<span style="color:#008080">CORE_PEER_TLS_ROOTCERT_FILE</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_MSPCONFIGPATH</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_ADDRESS</span><span style="color:#000;font-weight:bold">=</span>peer0.org2.example.com:9051
</code></pre></td></tr></table>
</div>
</div><p>执行下面命令，加入通道，执行完成后，输出内容与<code>peer0.org1.example.com</code>的相同</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer channel join -b channel-artifacts/mychannel.block
</code></pre></td></tr></table>
</div>
</div><h4 id="424-peer1org2examplecom节点加入通道">4.2.4 <code>peer1.org2.example.com</code>节点加入通道</h4>
<p>配置环境变量：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_LOCALMSPID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Org2MSP&#34;</span>
<span style="color:#008080">CORE_PEER_TLS_ROOTCERT_FILE</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_MSPCONFIGPATH</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_ADDRESS</span><span style="color:#000;font-weight:bold">=</span>peer1.org2.example.com:10051
</code></pre></td></tr></table>
</div>
</div><p>执行下面命令，加入通道，执行完成后，输出内容与<code>peer0.org1.example.com</code>的相同</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer channel join -b channel-artifacts/mychannel.block
</code></pre></td></tr></table>
</div>
</div><h3 id="43-更新锚节点操作">4.3 更新锚节点操作</h3>
<h4 id="431-更新-org1的锚节点">4.3.1 更新 <code>Org1</code>的锚节点</h4>
<p>配置环境变量：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_LOCALMSPID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Org1MSP&#34;</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">ORDERER_CA</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_TLS_ROOTCERT_FILE</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_MSPCONFIGPATH</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_ADDRESS</span><span style="color:#000;font-weight:bold">=</span>peer0.org1.example.com:7051
</code></pre></td></tr></table>
</div>
</div><p>执行下面命令，更新<code>org1</code>的锚节点：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># channel update 更新通道操作，-o 指定 orderer 节点地址，-c 指定通道ID，-f 指定锚节点配置更新文件路径 --tls 启用TLS，--cafile 指定tlsca证书的文件路径</span>
peer channel update -o orderer.example.com:7050 -c mychannel -f ./channel-artifacts/Org1MSPanchors.tx --tls <span style="color:#0086b3">true</span> --cafile <span style="color:#008080">$ORDERER_CA</span>
</code></pre></td></tr></table>
</div>
</div><p>执行完成后，会有如下输：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-26 13:17:34.520 UTC <span style="color:#000;font-weight:bold">[</span>channelCmd<span style="color:#000;font-weight:bold">]</span> InitCmdFactory -&gt; INFO <span style="color:#099">001</span> Endorser and orderer connections initialized
2019-07-26 13:17:34.693 UTC <span style="color:#000;font-weight:bold">[</span>channelCmd<span style="color:#000;font-weight:bold">]</span> update -&gt; INFO <span style="color:#099">002</span> Successfully submitted channel update
</code></pre></td></tr></table>
</div>
</div><h4 id="432-更新org2的锚节点">4.3.2 更新<code>Org2</code>的锚节点</h4>
<p>配置环境变量：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_LOCALMSPID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Org2MSP&#34;</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">ORDERER_CA</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_TLS_ROOTCERT_FILE</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_MSPCONFIGPATH</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_ADDRESS</span><span style="color:#000;font-weight:bold">=</span>peer0.org2.example.com:9051
</code></pre></td></tr></table>
</div>
</div><p>执行下面命令，更新<code>org2</code>的锚节点，执行完成后，输出内容与上面的相同：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer channel update -o orderer.example.com:7050 -c mychannel -f ./channel-artifacts/Org2MSPanchors.tx --tls <span style="color:#0086b3">true</span> --cafile <span style="color:#008080">$ORDERER_CA</span>
</code></pre></td></tr></table>
</div>
</div><h2 id="5-安装实例化执行链码">5 安装、实例化、执行链码</h2>
<h3 id="51-安装链码">5.1 安装链码</h3>
<p>如果需要通过某个<code>peer</code>节点访问和执行<code>chancode</code>，那个这个节点上必须要先安装这个<code>chaincode</code>。这里我们将在<code>peer0.org1.example.com</code>和<code>peer0.org2.example.com</code>两个节点上安装链码</p>
<h4 id="511-在-peer0org1examplecom上安装链码">5.1.1 在 <code>peer0.org1.example.com</code>上安装链码</h4>
<p>首先设置环境变量：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_LOCALMSPID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Org1MSP&#34;</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">ORDERER_CA</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_TLS_ROOTCERT_FILE</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_MSPCONFIGPATH</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_ADDRESS</span><span style="color:#000;font-weight:bold">=</span>peer0.org1.example.com:7051
</code></pre></td></tr></table>
</div>
</div><p>然后执行下面命令，安装链码：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># chaincode install 安装链码，-n 指定链码名称，-v 指定链码版本，-l 指定链码的语言，-p 指定链码文件夹的路径</span>
peer chaincode install -n mycc -v 1.0 -l golang -p <span style="color:#d14">&#34;github.com/chaincode/chaincode_example02/go/&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>安装完成之后，会有如下输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-26 13:36:08.689 UTC <span style="color:#000;font-weight:bold">[</span>chaincodeCmd<span style="color:#000;font-weight:bold">]</span> checkChaincodeCmdParams -&gt; INFO <span style="color:#099">001</span> Using default escc
2019-07-26 13:36:08.689 UTC <span style="color:#000;font-weight:bold">[</span>chaincodeCmd<span style="color:#000;font-weight:bold">]</span> checkChaincodeCmdParams -&gt; INFO <span style="color:#099">002</span> Using default vscc
2019-07-26 13:36:09.486 UTC <span style="color:#000;font-weight:bold">[</span>chaincodeCmd<span style="color:#000;font-weight:bold">]</span> install -&gt; INFO <span style="color:#099">003</span> Installed remotely response:&lt;status:200 payload:<span style="color:#d14">&#34;OK&#34;</span> &gt;
</code></pre></td></tr></table>
</div>
</div><h4 id="512-在-peer0org2examplecom上安装链码">5.1.2 在 <code>peer0.org2.example.com</code>上安装链码</h4>
<p>首先设置环境变量：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_LOCALMSPID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Org2MSP&#34;</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">ORDERER_CA</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_TLS_ROOTCERT_FILE</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_MSPCONFIGPATH</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_ADDRESS</span><span style="color:#000;font-weight:bold">=</span>peer0.org2.example.com:9051
</code></pre></td></tr></table>
</div>
</div><p>然后执行下面命令，安装链码，安装完成之后，输出内容与上相同</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer chaincode install -n mycc -v 1.0 -l golang -p <span style="color:#d14">&#34;github.com/chaincode/chaincode_example02/go/&#34;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="52-实例化链码">5.2 实例化链码</h3>
<p><code>chaincode</code>安装后需要实例化才能使用，在<code>channel</code>中，一个<code>chaincode</code>只需要进行一次实例化(<code>instantiate</code>)操作即可。</p>
<p>我们在<code>peer0.org2.example.com</code>节点上实例化链码，所以先配置环境变量：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_LOCALMSPID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Org2MSP&#34;</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">ORDERER_CA</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_TLS_ROOTCERT_FILE</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_MSPCONFIGPATH</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/users/Admin@org2.example.com/msp
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_ADDRESS</span><span style="color:#000;font-weight:bold">=</span>peer0.org2.example.com:9051
</code></pre></td></tr></table>
</div>
</div><p>执行下面命令，实例化链码：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># chaincode instantiate 实例化链码，-o 指定orderer节点地址，-C 指定通道ID，-n 指定链码名称吗，-v 指定链码版本，-c 指定调用链码 init 方法时传入的参数，-P 指定背书策略，这里是策略是需要org1或者org2的成员同意 --tls 启用 TLS --cafile 指定tlsca证书文件路径</span>
peer chaincode instantiate -o orderer.example.com:7050 -C mychannel -n mycc -v 1.0 -c <span style="color:#d14">&#39;{&#34;Args&#34;:[&#34;init&#34;,&#34;a&#34;,&#34;100&#34;,&#34;b&#34;,&#34;200&#34;]}&#39;</span> -P <span style="color:#d14">&#34;OR (&#39;Org1MSP.member&#39;,&#39;Org2MSP.member&#39;)&#34;</span> --tls <span style="color:#0086b3">true</span> --cafile <span style="color:#008080">$ORDERER_CA</span>
</code></pre></td></tr></table>
</div>
</div><p>执行完成之后，只有如下内容输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-26 13:57:14.619 UTC <span style="color:#000;font-weight:bold">[</span>chaincodeCmd<span style="color:#000;font-weight:bold">]</span> checkChaincodeCmdParams -&gt; INFO <span style="color:#099">001</span> Using default escc
2019-07-26 13:57:14.619 UTC <span style="color:#000;font-weight:bold">[</span>chaincodeCmd<span style="color:#000;font-weight:bold">]</span> checkChaincodeCmdParams -&gt; INFO <span style="color:#099">002</span> Using default vscc
</code></pre></td></tr></table>
</div>
</div><h3 id="53-调用链码">5.3 调用链码</h3>
<p>经过上面的所有操作，我们的网络环境和链码都已经配置完成了，下面我们就可以对链码执行<code>query</code>和<code>invoke</code>操作了。</p>
<p><strong>查询<code>a</code>账户的余额</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># chaincode query 链码查询操作</span>
peer chaincode query -C mychannel -n mycc -c <span style="color:#d14">&#39;{&#34;Args&#34;:[&#34;query&#34;,&#34;a&#34;]}&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>得到输出结果为<code>100</code></p>
<p><strong>查询<code>b</code>账户的余额</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer chaincode query -C mychannel -n mycc -c <span style="color:#d14">&#39;{&#34;Args&#34;:[&#34;query&#34;,&#34;b&#34;]}&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>得到输出结果为<code>200</code></p>
<p>上面的两个查询命令会获取经背书的<code>chaincode</code>执行结果。但它不会产生交易<code>transaction</code></p>
<p><strong><code>a</code>账户向<code>b</code>账户转账<code>10</code>元</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># chaincode invoke 执行链码 invoke 方法，-o 指定orderer节点地址，--tls 启动TLS，--cafile 指定tlsca的证书文件路径 -C 指定通道名称，-n 指定链码名称，-peerAddress 指定需要连接到的peer节点地址，--tlsRootCertFiles  如果启用了TLS，则指向需要连接的peer节点的TLS根证书文件路径 -c 执行invoke方法传入的参数</span>
peer chaincode invoke -o orderer.example.com:7050 --tls <span style="color:#0086b3">true</span> --cafile <span style="color:#008080">$ORDERER_CA</span> -C mychannel -n mycc --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt -c <span style="color:#d14">&#39;{&#34;Args&#34;:[&#34;invoke&#34;,&#34;a&#34;,&#34;b&#34;,&#34;10&#34;]}&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>执行完成之后，会有如下输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-26 14:29:37.209 UTC <span style="color:#000;font-weight:bold">[</span>chaincodeCmd<span style="color:#000;font-weight:bold">]</span> chaincodeInvokeOrQuery -&gt; INFO <span style="color:#099">001</span> Chaincode invoke successful. result: status:200
</code></pre></td></tr></table>
</div>
</div><p>接着我们可以再次执行上面的查询<code>a</code>和<code>b</code>余额的命令，查询现在的余额，经过查询，可以发现现在<code>a</code>余额为<code>90</code>，<code>b</code>余额为<code>210</code>。</p>
<p>我们还可以尝试连接到<code>peer1.org1.example.com</code>上进行查询操作，具体步骤如下：</p>
<p>先配置环境变量：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_LOCALMSPID</span><span style="color:#000;font-weight:bold">=</span><span style="color:#d14">&#34;Org1MSP&#34;</span>
<span style="color:#0086b3">export</span> <span style="color:#008080">ORDERER_CA</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_TLS_ROOTCERT_FILE</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_MSPCONFIGPATH</span><span style="color:#000;font-weight:bold">=</span>/opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/users/Admin@org1.example.com/msp
<span style="color:#0086b3">export</span> <span style="color:#008080">CORE_PEER_ADDRESS</span><span style="color:#000;font-weight:bold">=</span>peer1.org1.example.com:8051
</code></pre></td></tr></table>
</div>
</div><p>执行查询链码操作：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer chaincode query -C mychannel -n mycc -c <span style="color:#d14">&#39;{&#34;Args&#34;:[&#34;query&#34;,&#34;a&#34;]}&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>执行完成之后，我们会发现返回了如下错误：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Error: endorsement failure during query. response: status:500 message:<span style="color:#d14">&#34;cannot retrieve package for chaincode mycc/1.0, error open /var/hyperledger/production/chaincodes/mycc.1.0: no such file or directory&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>这个原因就是我们没有在<code>peer1.org1.example.com</code>节点上安装链码，所以我们无法在该节点上执行调用链码的操作，所以我们需要先再该节点上安装链码，具体命令如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer chaincode install -n mycc -v 1.0 -l golang -p <span style="color:#d14">&#34;github.com/chaincode/chaincode_example02/go/&#34;</span>
</code></pre></td></tr></table>
</div>
</div><p>然后我们再进行查询操作：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer chaincode query -C mychannel -n mycc -c <span style="color:#d14">&#39;{&#34;Args&#34;:[&#34;query&#34;,&#34;a&#34;]}&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>我们可以看到，成功查询出了<code>a</code>账户的余额为<code>90</code></p>
<p>我们可以使用<code>exit</code>命令退出<code>cli</code>容器，光标回到了主机下面。经过上面调用链码等操作后，我们再次使用<code>docker ps</code>命令来查看后台运行的容器服务情况如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">CONTAINER ID        IMAGE                                                                                                  COMMAND                  CREATED             STATUS              PORTS                      NAMES
9096320344ee        dev-peer1.org1.example.com-mycc-1.0-cd123150154e6bf2df7ce682e0b1bcbea40499416f37a6da3aae14c4eb51b08d   <span style="color:#d14">&#34;chaincode -peer.add…&#34;</span>   <span style="color:#099">48</span> seconds ago      Up <span style="color:#099">46</span> seconds                                  dev-peer1.org1.example.com-mycc-1.0
e60c9a77b244        dev-peer0.org1.example.com-mycc-1.0-384f11f484b9302df90b453200cfb25174305fce8f53f4e94d45ee3b6cab0ce9   <span style="color:#d14">&#34;chaincode -peer.add…&#34;</span>   <span style="color:#099">20</span> minutes ago      Up <span style="color:#099">20</span> minutes                                  dev-peer0.org1.example.com-mycc-1.0
b685dd5d864c        dev-peer0.org2.example.com-mycc-1.0-15b571b3ce849066b7ec74497da3b27e54e0df1345daff3951b94245ce09c42b   <span style="color:#d14">&#34;chaincode -peer.add…&#34;</span>   <span style="color:#099">44</span> minutes ago      Up <span style="color:#099">44</span> minutes                                  dev-peer0.org2.example.com-mycc-1.0
7ddf52548cfd        hyperledger/fabric-tools:latest                                                                        <span style="color:#d14">&#34;/bin/bash&#34;</span>              <span style="color:#099">3</span> hours ago         Up <span style="color:#099">3</span> hours                                     cli
a495b24483dc        hyperledger/fabric-orderer:latest                                                                      <span style="color:#d14">&#34;orderer&#34;</span>                <span style="color:#099">3</span> hours ago         Up <span style="color:#099">3</span> hours          0.0.0.0:7050-&gt;7050/tcp     orderer.example.com
5349a515df51        hyperledger/fabric-peer:latest                                                                         <span style="color:#d14">&#34;peer node start&#34;</span>        <span style="color:#099">3</span> hours ago         Up <span style="color:#099">3</span> hours          0.0.0.0:10051-&gt;10051/tcp   peer1.org2.example.com
a8a579ebd979        hyperledger/fabric-peer:latest                                                                         <span style="color:#d14">&#34;peer node start&#34;</span>        <span style="color:#099">3</span> hours ago         Up <span style="color:#099">3</span> hours          0.0.0.0:7051-&gt;7051/tcp     peer0.org1.example.com
5614be188b35        hyperledger/fabric-peer:latest                                                                         <span style="color:#d14">&#34;peer node start&#34;</span>        <span style="color:#099">3</span> hours ago         Up <span style="color:#099">3</span> hours          0.0.0.0:9051-&gt;9051/tcp     peer0.org2.example.com
d6672dcc70d4        hyperledger/fabric-peer:latest                                                                         <span style="color:#d14">&#34;peer node start&#34;</span>        <span style="color:#099">3</span> hours ago         Up <span style="color:#099">3</span> hours          0.0.0.0:8051-&gt;8051/tcp     peer1.org1.example.com
</code></pre></td></tr></table>
</div>
</div><p>我们可以看到，相比于之前，现在多了三个容器，不难看出，这三个容器都是链码容器。在节点的<code>chaincode</code>第一次被实例化或使用激活时，会启用一个容器来运行<code>chaincode</code>。</p>
<h3 id="54-其他channelchaincode操作">5.4 其他<code>Channel</code>、<code>Chaincode</code>操作</h3>
<p>我们还是先执行<code>docker exec -it cli bash</code>进入<code>cli</code>容器内进行操作</p>
<ul>
<li>
<p>列出当前节点所加入的<code>Channel</code>:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer channel list
</code></pre></td></tr></table>
</div>
</div><p>输出内容为：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-26 16:02:11.361 UTC <span style="color:#000;font-weight:bold">[</span>channelCmd<span style="color:#000;font-weight:bold">]</span> InitCmdFactory -&gt; INFO <span style="color:#099">001</span> Endorser and orderer connections initialized
Channels peers has joined:
mychannel
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>列出当前节点所有已经安装的<code>Chaincode</code>:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer chaincode list --installed
</code></pre></td></tr></table>
</div>
</div><p>输出结果为：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Get installed chaincodes on peer:
Name: mycc, Version: 1.0, Path: github.com/chaincode/chaincode_example02/go/, Id: 333a19b11063d0ade7be691f9f22c04ad369baba15660f7ae9511fd1a6488209
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>获取特定<code>Channel</code>上的区块信息：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer channel getinfo -c mychannel
</code></pre></td></tr></table>
</div>
</div><p>输出结果为：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-26 16:06:02.085 UTC <span style="color:#000;font-weight:bold">[</span>channelCmd<span style="color:#000;font-weight:bold">]</span> InitCmdFactory -&gt; INFO <span style="color:#099">001</span> Endorser and orderer connections initialized
Blockchain info: <span style="color:#000;font-weight:bold">{</span><span style="color:#d14">&#34;height&#34;</span>:6,<span style="color:#d14">&#34;currentBlockHash&#34;</span>:<span style="color:#d14">&#34;kIw2CHcxYZU3gDwZUH7l9qN/m0Sn8DXXJ8ra7Z5O9Jk=&#34;</span>,<span style="color:#d14">&#34;previousBlockHash&#34;</span>:<span style="color:#d14">&#34;e3+BrzDCedbzz+zvcW3E+tCXG+DE4C0KOerbUxU7h8E=&#34;</span><span style="color:#000;font-weight:bold">}</span>
</code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>进一步获取特定高度的<code>Block</code>详细内容，例如，下面是获取最后一块（从<code>0</code>开始编号）<code>Block</code>的详细内容</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer channel fetch <span style="color:#099">5</span> mychannel_5.block -o orderer.example.com:7050 -c mychannel --tls --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer.example.com/msp/tlscacerts/tlsca.example.com-cert.pem
</code></pre></td></tr></table>
</div>
</div><p>运行完成后，会有如下输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-26 16:12:50.014 UTC <span style="color:#000;font-weight:bold">[</span>channelCmd<span style="color:#000;font-weight:bold">]</span> InitCmdFactory -&gt; INFO <span style="color:#099">001</span> Endorser and orderer connections initialized
2019-07-26 16:12:50.017 UTC <span style="color:#000;font-weight:bold">[</span>cli.common<span style="color:#000;font-weight:bold">]</span> readBlock -&gt; INFO <span style="color:#099">002</span> Received block: <span style="color:#099">5</span>
</code></pre></td></tr></table>
</div>
</div><p>我们使用<code>ll</code>查看当前目录下，会发现多了一个<code>mychannel_5.block</code>文件，我们接下来就可以使用<code>configtcgen</code>工具将这个区块文件解析成<code>json</code>格式的文件了，具体命令如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">configtxgen --inspectBlock mychannel_5.block &gt; channel-artifacts/mychannel_5.json
</code></pre></td></tr></table>
</div>
</div><p>运行完成后，有如下输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-07-26 16:13:07.306 UTC <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> main -&gt; INFO <span style="color:#099">001</span> Loading configuration
2019-07-26 16:13:07.631 UTC <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> completeInitialization -&gt; INFO <span style="color:#099">002</span> Orderer.Addresses unset, setting to <span style="color:#000;font-weight:bold">[</span>127.0.0.1:7050<span style="color:#000;font-weight:bold">]</span>
2019-07-26 16:13:07.631 UTC <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> completeInitialization -&gt; INFO <span style="color:#099">003</span> orderer type: solo
2019-07-26 16:13:07.631 UTC <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> LoadTopLevel -&gt; INFO <span style="color:#099">004</span> Loaded configuration: /etc/hyperledger/fabric/configtx.yaml
2019-07-26 16:13:07.631 UTC <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> doInspectBlock -&gt; INFO <span style="color:#099">005</span> Inspecting block
2019-07-26 16:13:07.631 UTC <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> doInspectBlock -&gt; INFO <span style="color:#099">006</span> Parsing genesis block
</code></pre></td></tr></table>
</div>
</div><p>我们在主机的<code>/opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network/channel-artifacts</code>目录下就能看到刚才解析出来的<code>json</code>格式的区块文件<code>mychannel_5.json</code>。</p>
</li>
</ul>
<h4 id="55-关闭网络">5.5 关闭网络</h4>
<p>如果我们需要将刚才搭建出来的网络关闭，并且清除一些环境信息等，我们可以使用<code>first-network</code>提供了脚本进行关闭即可，具体操作如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># 首先来到 first-network 目录下</span>
<span style="color:#0086b3">cd</span> /opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network
<span style="color:#998;font-style:italic"># 执行关闭网络的脚本命令</span>
./byfn.sh down
</code></pre></td></tr></table>
</div>
</div><p>输入命令后，接着会让选择是否继续，我们输入<code>y</code>继续执行。执行完成后，会有如下输出：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#000;font-weight:bold">[</span>root@localhost first-network<span style="color:#000;font-weight:bold">]</span><span style="color:#998;font-style:italic"># ./byfn.sh down</span>
Stopping <span style="color:#000;font-weight:bold">for</span> channel <span style="color:#d14">&#39;mychannel&#39;</span> with CLI timeout of <span style="color:#d14">&#39;10&#39;</span> seconds and CLI delay of <span style="color:#d14">&#39;3&#39;</span> seconds
Continue? <span style="color:#000;font-weight:bold">[</span>Y/n<span style="color:#000;font-weight:bold">]</span> y
proceeding ...
WARNING: The BYFN_CA2_PRIVATE_KEY variable is not set. Defaulting to a blank string.
WARNING: The BYFN_CA1_PRIVATE_KEY variable is not set. Defaulting to a blank string.
Stopping cli                    ... <span style="color:#000;font-weight:bold">done</span>
Stopping orderer.example.com    ... <span style="color:#000;font-weight:bold">done</span>
Stopping peer1.org2.example.com ... <span style="color:#000;font-weight:bold">done</span>
Stopping peer0.org1.example.com ... <span style="color:#000;font-weight:bold">done</span>
Stopping peer0.org2.example.com ... <span style="color:#000;font-weight:bold">done</span>
Stopping peer1.org1.example.com ... <span style="color:#000;font-weight:bold">done</span>
Removing cli                    ... <span style="color:#000;font-weight:bold">done</span>
Removing orderer.example.com    ... <span style="color:#000;font-weight:bold">done</span>
Removing peer1.org2.example.com ... <span style="color:#000;font-weight:bold">done</span>
Removing peer0.org1.example.com ... <span style="color:#000;font-weight:bold">done</span>
Removing peer0.org2.example.com ... <span style="color:#000;font-weight:bold">done</span>
Removing peer1.org1.example.com ... <span style="color:#000;font-weight:bold">done</span>
Removing network net_byfn
Removing volume net_peer0.org3.example.com
WARNING: Volume net_peer0.org3.example.com not found.
Removing volume net_peer1.org3.example.com
WARNING: Volume net_peer1.org3.example.com not found.
Removing volume net_orderer2.example.com
WARNING: Volume net_orderer2.example.com not found.
Removing volume net_orderer.example.com
Removing volume net_peer0.org2.example.com
Removing volume net_peer0.org1.example.com
Removing volume net_peer1.org1.example.com
Removing volume net_peer1.org2.example.com
Removing volume net_orderer5.example.com
WARNING: Volume net_orderer5.example.com not found.
Removing volume net_orderer4.example.com
WARNING: Volume net_orderer4.example.com not found.
Removing volume net_orderer3.example.com
WARNING: Volume net_orderer3.example.com not found.
9096320344ee
e60c9a77b244
b685dd5d864c
Untagged: dev-peer1.org1.example.com-mycc-1.0-cd123150154e6bf2df7ce682e0b1bcbea40499416f37a6da3aae14c4eb51b08d:latest
Deleted: sha256:bffb85af26a7def57aa707fa85b99b59b966080d7964823004010f082a0ad198
Deleted: sha256:48c94dc3357616bc7c38a70644e9abf4be2df1a00709386ad7d7c98f281a4ea9
Deleted: sha256:506f39276ec553d0eb2b152dbac19e284f4ef90431213e377acbdd77dbaf1702
Deleted: sha256:0a59238e1a3fe6dd87e5f401063534937136382e1f21c61a8db71143f7967d84
Untagged: dev-peer0.org1.example.com-mycc-1.0-384f11f484b9302df90b453200cfb25174305fce8f53f4e94d45ee3b6cab0ce9:latest
Deleted: sha256:3bff91b1dec74033b6be007f24535c89a8a40bc1b12eab128d90e1b2d9026eb7
Deleted: sha256:8fd2fc3bfd9a9a0dae331d155600a442d11a61428806feb5a2efc86dbd264e84
Deleted: sha256:a2aa63cc2b7c032094d1afe69fddc4125855d1c072cb4dacdbf408fc34f5378e
Deleted: sha256:ba6b3377507dc8417b2742fb30b494a4a70341665ecd24f34e5dd51f97c9be28
Untagged: dev-peer0.org2.example.com-mycc-1.0-15b571b3ce849066b7ec74497da3b27e54e0df1345daff3951b94245ce09c42b:latest
Deleted: sha256:1d073a8218d632d77ccb818dc1be159baf0ebdbd7150e603d6bb84e9a5ab91b8
Deleted: sha256:253c4f60d83ae040fb3a258cb755f7d24e1ae3bc55e0dbab4f75f41f71104c81
Deleted: sha256:a2cc738b0997ece4ca4f6b568b2a3477838e9c715cdb31c2e0e65e40656f0dae
Deleted: sha256:876947d888edf4b1f8863275afd249f210d0723029e3ffad27d68ef9b12bcc42
</code></pre></td></tr></table>
</div>
</div><p>关闭网络后，我们可以使用<code>docker ps -a</code>命令查看后台是否存在运行着的或关闭的容器，我们可以发现，所有容器清除完成了。</p>
<h2 id="6-参考">6 参考</h2>
<ul>
<li>
<p><a href="https://www.ibm.com/developerworks/cn/cloud/library/cl-lo-hyperledger-fabric-practice-analysis/index.html">分步详解 Fabric 区块链网络的部署</a></p>
</li>
<li>
<p><a href="https://blog.csdn.net/qq_25870633/article/details/81184781">fabric主要配置文件细讲</a></p>
</li>
<li>
<p><a href="https://www.cnblogs.com/cbkj-xd/p/11153080.html">Hyperledger Fabric相关文件解析</a></p>
</li>
<li>
<p><a href="https://www.cnblogs.com/cbkj-xd/p/11067810.html">深入解析Hyperledger Fabric搭建的全过程</a></p>
</li>
<li>
<p><a href="https://docker_practice.gitee.io/">Docker — 从入门到实践</a></p>
</li>
</ul>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://shenyimingdada.github.io/">sym</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://shenyimingdada.github.io/%E4%BD%BF%E7%94%A8Chaincode%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E8%B0%83%E8%AF%95%E9%93%BE%E7%A0%81.html">https://shenyimingdada.github.io/%E4%BD%BF%E7%94%A8Chaincode%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E8%B0%83%E8%AF%95%E9%93%BE%E7%A0%81.html</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/%E4%BD%BF%E7%94%A8Chaincode%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E8%B0%83%E8%AF%95%E9%93%BE%E7%A0%81.html">Fabric 中动态加入组织</a></li>
        
        <li><a href="/%E4%BD%BF%E7%94%A8Chaincode%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E8%B0%83%E8%AF%95%E9%93%BE%E7%A0%81.html">使用 Chaincode 开发模式调试链码</a></li>
        
        <li><a href="/first.html">test</a></li>
        
        <li><a href="/2019/12/18/golang-gin-query-parameters-array-map.html">Golang Gin 实战（五）| 接收数组和 Map</a></li>
        
        <li><a href="/post/2019-12-15-golang-gin-query-parameters-source-code-analysis/">Golang Gin 实战（三）| 路由参数</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            <ul class="clearfix">
                
                <li><a href='/tags/golang'>golang</a></li>
                
                <li><a href='/tags/fabric'>fabric</a></li>
                
            </ul>
            
        </div>
    </article>
    
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yourdiscussshortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "your github repo"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2021 <a href="https://shenyimingdada.github.io/">sym的博客 By sym</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">sym</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://shenyimingdada.github.io/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://shenyimingdada.github.io/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://shenyimingdada.github.io/first.html" title="test">test</a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/2019/12/18/golang-gin-query-parameters-array-map.html" title="Golang Gin 实战（五）| 接收数组和 Map">Golang Gin 实战（五）| 接收数组和 Map</a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/2019-12-13-golang-gin-parameters-in-path/" title="Golang Gin 实战（三）| 路由参数">Golang Gin 实战（三）| 路由参数</a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/2019-12-15-golang-gin-query-parameters-source-code-analysis/" title="Golang Gin 实战（三）| 路由参数">Golang Gin 实战（三）| 路由参数</a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/Fabirc-Explorer%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3/" title=""></a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/Fabric-CA%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8/" title=""></a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/Fabric1.4.2%E7%9A%84%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3/" title=""></a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/Fabric%E4%B8%AD%E5%8A%A8%E6%80%81%E5%8A%A0%E5%85%A5%E8%8A%82%E7%82%B9/" title=""></a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/%E5%9C%A8Fabric1.4.2%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%B9%B6%E5%88%86%E6%9E%90Raft%E5%85%B1%E8%AF%86/" title=""></a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/%E4%BD%BF%E7%94%A8Chaincode%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E8%B0%83%E8%AF%95%E9%93%BE%E7%A0%81.html" title="Fabric 中动态加入组织">Fabric 中动态加入组织</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://shenyimingdada.github.io/categories/Golang/">Golang (7)</a></li>
    
    <li><a href="https://shenyimingdada.github.io/categories/Python/">Python (1)</a></li>
    
    <li><a href="https://shenyimingdada.github.io/categories/fabric/">fabric (3)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://shenyimingdada.github.io/tags/fabric/">fabric</a>
    
    <a href="https://shenyimingdada.github.io/tags/golang/">golang</a>
    
    <a href="https://shenyimingdada.github.io/tags/python/">python</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://www.flysnow.org/" title="sym的博客">sym的博客</a>
        </li>
        
        <li>
            <a target="_blank" href="http://yuedu.baidu.com/ebook/14a722970740be1e640e9a3e" title="Android Gradle权威指南">Android Gradle权威指南</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://shenyimingdada.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>