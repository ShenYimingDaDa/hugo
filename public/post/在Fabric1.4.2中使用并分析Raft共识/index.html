<!doctype html>
<html lang="zh-CN">
<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <meta name="referrer" content="no-referrer-when-downgrade">
    

    <title> | sym的博客</title>
    <meta property="og:title" content=" - sym的博客">
    <meta property="og:type" content="article">
        
        
    <meta name="Keywords" content="golang,go语言,go语言笔记,sym,java,android,博客,项目管理,python,软件架构,公众号,小程序">
    <meta name="description" content="">
        
    <meta name="author" content="sym">
    <meta property="og:url" content="https://shenyimingdada.github.io/post/%E5%9C%A8Fabric1.4.2%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%B9%B6%E5%88%86%E6%9E%90Raft%E5%85%B1%E8%AF%86/">
    <link rel="shortcut icon" href='/favicon.ico'  type="image/x-icon">

    <link rel="stylesheet" href='/css/normalize.css'>
    <link rel="stylesheet" href='/css/style.css'>
    <script type="text/javascript" src="//cdn.bootcdn.net/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    
    
    
    
    
    
        <link rel="stylesheet" href='/css/douban.css'>
    
        <link rel="stylesheet" href='/css/other.css'>
    
</head>


<body>
    <header id="header" class="clearfix">
    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                
                    <a id="logo" href="https://shenyimingdada.github.io/">
                        sym的博客
                    </a>
                
                <p class="description">专注于Android、Java、Go语言(golang)、移动互联网、项目管理、软件架构</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="current" href="https://shenyimingdada.github.io/">首页</a>
                    
                    <a  href="https://shenyimingdada.github.io/tools/" title="工具">工具</a>
                    
                    <a  href="https://shenyimingdada.github.io/archives/" title="归档">归档</a>
                    
                    <a  href="https://shenyimingdada.github.io/about/" title="关于">关于</a>
                    
                </nav>
            </div>
        </div>
    </div>
</header>

    <div id="body">
        <div class="container">
            <div class="col-group">

                <div class="col-8" id="main">
                    
<div class="res-cons">
    <style type="text/css">
    .post-toc {
        position: fixed;
        width: 200px;
        margin-left: -210px;
        padding: 5px 10px;
        font-family: Athelas, STHeiti, Microsoft Yahei, serif;
        font-size: 12px;
        border: 1px solid rgba(0, 0, 0, .07);
        border-radius: 5px;
        background-color: rgba(255, 255, 255, 0.98);
        background-clip: padding-box;
        -webkit-box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        box-shadow: 1px 1px 2px rgba(0, 0, 0, .125);
        word-wrap: break-word;
        white-space: nowrap;
        -webkit-box-sizing: border-box;
        box-sizing: border-box;
        z-index: 999;
        cursor: pointer;
        max-height: 70%;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .post-toc .post-toc-title {
        width: 100%;
        margin: 0 auto;
        font-size: 20px;
        font-weight: 400;
        text-transform: uppercase;
        text-align: center;
    }

    .post-toc .post-toc-content {
        font-size: 15px;
    }

    .post-toc .post-toc-content>nav>ul {
        margin: 10px 0;
    }

    .post-toc .post-toc-content ul {
        padding-left: 20px;
        list-style: square;
        margin: 0.5em;
        line-height: 1.8em;
    }

    .post-toc .post-toc-content ul ul {
        padding-left: 15px;
        display: none;
    }

    @media print,
    screen and (max-width:1057px) {
        .post-toc {
            display: none;
        }
    }
</style>
<div class="post-toc" style="position: absolute; top: 188px;">
    <h2 class="post-toc-title">文章目录</h2>
    <div class="post-toc-content">
        <nav id="TableOfContents">
  <ul>
    <li><a href="#1-前言">1. 前言</a></li>
    <li><a href="#2-共识机制简介">2. 共识机制简介</a></li>
    <li><a href="#3-raft-共识简介">3. Raft 共识简介</a></li>
    <li><a href="#4-在-first-network-例子中使用-raft-共识">4. 在 First-network 例子中使用 Raft 共识</a>
      <ul>
        <li><a href="#41-基本概念">4.1 基本概念</a></li>
        <li><a href="#42-raft共识的相关配置文件">4.2 <code>Raft</code>共识的相关配置文件</a></li>
        <li><a href="#43-启动网络并分析日志">4.3 启动网络并分析日志</a></li>
      </ul>
    </li>
    <li><a href="#5-验证-raft-共识的容错功能">5. 验证 Raft 共识的容错功能</a></li>
    <li><a href="#6-参考">6 参考</a></li>
  </ul>
</nav>
    </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        var postToc = $(".post-toc");
        if (postToc.length) {
            var leftPos = $("#main").offset().left;
            if(leftPos<220){
                postToc.css({"width":leftPos-10,"margin-left":(0-leftPos)})
            }

            var t = postToc.offset().top - 20,
                a = {
                    start: {
                        position: "absolute",
                        top: t
                    },
                    process: {
                        position: "fixed",
                        top: 20
                    },
                };
            $(window).scroll(function () {
                var e = $(window).scrollTop();
                e < t ? postToc.css(a.start) : postToc.css(a.process)
            })
        }
    })
</script>
    <article class="post">
        <header>
            <h1 class="post-title"></h1>
        </header>
        <date class="post-meta meta-date">
            1年1月1日
        </date>
        
        
        <div class="post-meta">
            <span id="busuanzi_container_page_pv">|<span id="busuanzi_value_page_pv"></span><span>
                    阅读</span></span>
        </div>
        
        
        <div class="post-content">
            <h1 id="在fabric-142-中使用并分析-raft-共识">在Fabric 1.4.2 中使用并分析 Raft 共识</h1>
<h2 id="1-前言">1. 前言</h2>
<p><code>Raft</code>是在<code>Fabric 1.4.1</code>版本中推出的继<code>solo</code>和<code>kafka</code>之后的一个新的共识插件，相比于<code>kafka</code>而言，<code>Raft</code>更加简单方便，更加适用于在生产环境中使用。</p>
<h2 id="2-共识机制简介">2. 共识机制简介</h2>
<p><strong>共识</strong>(<code>consensus</code>)在很多时候会与<strong>一致性</strong>(<code>consistency</code>)术语放在一起讨论。严谨上来讲，这两者的含义并不完全相同。</p>
<ul>
<li>一致性往往指分布式系统中多个副本对外呈现的数据的状态。</li>
<li>共识机制则描述了分布式系统中多个节点之间，彼此对某个状态达成一致结果的过程。</li>
</ul>
<p>现在的共识算法可以分为两类，一类是拜占庭错误(<code>Byzantine Fault Tolerance</code>)类算法，也称为<code>BFT</code>类；还有一类是非拜占庭错误(<code>Crash Fault Tolerance</code>)类算法，也称为<code>CFT</code>。这两类的区别主要在于节点是否会出现伪造信息的情况。<code>BFT</code>类算法就是解决那些节点会出现恶意伪造信息的问题，这类算法主要有<code>PBFT</code>为代表的确定性系列算法、<code>PoW</code>为代表的概率算法等。<code>CFT</code>类算法主要是解决那些节点会出现故障，例如网络故障，网络延迟等，但是不会出现恶意伪造信息的问题，这类算法主要有<code>Paxos</code>系列算法、<code>Raft</code>算法和<code>kafka</code>+<code>zookeeper</code>等。</p>
<blockquote>
<p><strong>问</strong>:为什么在<code>Fabric</code>中不使用更加能保证安全的<code>BFT</code>类共识算法？</p>
<p>首先，在<code>Fabric</code>中因为存在权限机制，节点已经通过数字证书保护了，所以出现节点作恶的几率是非常小的；其次，<code>BFT</code>类的共识算法需要<code>3n+1</code>的节点来处理故障。例如，要处理<code>BFT</code>中的<code>100</code>个恶意的节点，我们最少需要<code>301（3*100 + 1）</code>个节点来保证安全。而<code>Raft</code>共识仅需要<code>2n+1（2*100 + 1）</code>个节点来解决容错问题，与前者相比，综合考虑，使用<code>Raft</code>共识的成本最低，效益也最好。</p>
</blockquote>
<h2 id="3-raft-共识简介">3. Raft 共识简介</h2>
<p>在<code>Raft</code>共识中，节点有三种状态，如下图所示：</p>
<p>
        <img class="mx-auto" alt="Raft 节点状态转换" src="images/raft1.png" />   
    </p>
<ul>
<li><code>Follower</code>（跟随者）：最初所有的节点都会处于这个状态，如果<code>Follower</code>的倒计时结束(<code>Timeout</code>)后，他就会成为<code>Candidate</code>开始选举，<code>Follower</code>的日志可以被<code>Leader</code>覆盖</li>
<li><code>Candidate</code>（候选者）：每个节点上都有一个倒计时器(<code>Election Timeout</code>)，当一个节点的倒计时结束后，该节点就会变成<code>Candidate</code>，开始启动选举，向其他几个节点发送选举请求(<code>RequestVote</code>)，如果获得多数票，将会成为<code>Leader</code></li>
<li><code>Leader</code>（领导者）：当一个节点成为<code>Leader</code>后，会在每个一小段时间后，就给所有的<code>Follower</code>发送一个<code>Heartbeat</code>以保持所有节点的状态，<code>Follower</code>收到<code>Leader</code>的<code>Heartbeat</code>后重设<code>Timeout</code>。<code>Leader</code>处理客户端请求并确保所有<code>Follower</code>具有相同的日志副本。</li>
</ul>
<p>在<code>Raft</code>共识中，最主要进行的两个活动是选主(<code>Leader Election</code>)和复制日志(<code>Log Replication</code>)。原理这里就不再介绍了，可以参考<a href="https://www.jianshu.com/p/8e4bbe7e276c">共识算法：Raft</a>这篇文章，或者查看<a href="http://thesecretlivesofdata.com/raft/#home">Raft 动画演示</a>。我们将下面结合具体的<code>first-network</code>实例进行分析。其中就有选主和复制日志的过程。</p>
<h2 id="4-在-first-network-例子中使用-raft-共识">4. 在 First-network 例子中使用 Raft 共识</h2>
<h3 id="41-基本概念">4.1 基本概念</h3>
<p>在最新的<code>Fabric</code> 版本中，基于<code>Raft</code>共识的排序服务取代了现有的<code>kafka</code>+<code>zookeeper</code>的模式。在<code>orderer</code>服务集群中，每个节点都有自己的<code>Raft</code>状态机(<code>RSM</code>)来提交日志。<code>Client</code>(客户端)将使用<code>Broadcast RPC</code>发送交提案，<code>Raft OSN</code>将根据共识形成一个区块，当<code>peer</code>节点发出<code>Deliver RPC</code>是，就将区块发送给<code>peer</code>节点。</p>
<p>
        <img class="mx-auto" alt="具有3个节点的 Raft OSN" src="images/raftOSN.png" />   
    </p>
<p>每个通道都将在<code>Raft</code>协议的单独实例上运行，也就是说，如果一个网络中有<code>N</code>个<code>Channel</code>，那么意味着我们就有<code>N</code>个<code>Raft</code>集群，每个集群中都有自己的领导者。</p>
<h3 id="42-raft共识的相关配置文件">4.2 <code>Raft</code>共识的相关配置文件</h3>
<p>在最新版本的<code>first-network</code>例子中，已经写好了启用<code>Raft</code>共识的配置了。这里我们先分析一下具体它是如何启用的。</p>
<p>首先我们来看我们的启动脚本<code>byfn.sh</code>，在<code>printHelp()</code>中还没有定义与使用<code>Raft</code>共识的相关说明。这可能是还没来得及修改更新。但是我们在<code>networkUp()</code>函数中可以看到出现了<code>etcdraft</code>的字眼。在<code>169~171</code>行，根据脚本的逻辑，我们可以知道，当<code>CONSENSUS_TYPE</code>为<code>etcdraft</code>时，我们的<code>docker-compose</code>启动配置文件将增加一项<code>COMPOSE_FILE_RAFT2</code>，该变量的值就是<code>docker-compose-etcdraft2.yaml</code>，我们在<code>first-network</code>目录下可以看到这个<code>YAML</code>文件，打开这个文件我们可以看到，里面定义了四个<code>orderer</code>排序节点服务，加上<code>docker-compose-cli.yaml</code>文件中定义的一个<code>orderer</code>排序节点服务，刚好组成一个由五个<code>orderer</code>节点构成的排序服务集群。</p>
<p>只是在启动服务的时候多启动几台<code>orderer</code>节点就能使用<code>Raft</code>共识了吗，当然不是。之前我们在<code>《手动启动 Fabric 1.4.2 并解析全过程》</code>中已经分析过了<code>configtx.yaml</code>文件，在这个文件中，就有关于<code>etcdraft</code>的配置，我们可以在<code>configtx.yaml</code>文件的最后一项<code>Profiles</code>中看到，其中有一项<code>profile</code>叫做<code>SampleMultiNodeEtcdRaft</code>，如下:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-yaml" data-lang="yaml"><span style="color:#000;font-weight:bold">SampleMultiNodeEtcdRaft</span>:<span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ChannelDefaults</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 合并引入 Channel 的配置</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Capabilities</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ChannelCapabilities</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 合并引入 channel的能力（Capabilities）配置</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Orderer</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*OrdererDefaults</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 合并引入 orderer 的配置</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">OrdererType</span>:<span style="color:#bbb"> </span>etcdraft<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义 orderer 排序使用的共识为 etcdraft</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">EtcdRaft</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义有关 raft 共识的配置信息</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Consenters</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 定义所有参与共识的 orderer 节点信息</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>orderer.example.com<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 域名</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">7050</span><span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 端口</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#998;font-style:italic"># 客户端 TLS 证书</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ClientTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#998;font-style:italic"># 服务端TLS 证书</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ServerTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>orderer2.example.com<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ClientTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer2.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ServerTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer2.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>orderer3.example.com<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ClientTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer3.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ServerTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer3.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>orderer4.example.com<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ClientTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer4.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ServerTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer4.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#000;font-weight:bold">Host</span>:<span style="color:#bbb"> </span>orderer5.example.com<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">Port</span>:<span style="color:#bbb"> </span><span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ClientTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer5.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">                  </span><span style="color:#000;font-weight:bold">ServerTLSCert</span>:<span style="color:#bbb"> </span>crypto-config/ordererOrganizations/example.com/orderers/orderer5.example.com/tls/server.crt<span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#998;font-style:italic"># 定义 orderer 集群的地址数组</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Addresses</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span>- orderer.example.com:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- orderer2.example.com:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- orderer3.example.com:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- orderer4.example.com:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- orderer5.example.com:<span style="color:#099">7050</span><span style="color:#bbb">
</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 引入 Orderer 组织配置</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span>- <span style="color:#999;font-weight:bold;font-style:italic">*OrdererOrg</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Capabilities</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*OrdererCapabilities</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Application</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 应用部分</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*ApplicationDefaults</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb">
</span><span style="color:#bbb">            </span>- <span style="color:#000;font-weight:bold">&lt;&lt;</span>:<span style="color:#bbb"> </span><span style="color:#999;font-weight:bold;font-style:italic">*OrdererOrg</span><span style="color:#bbb">
</span><span style="color:#bbb">        </span><span style="color:#000;font-weight:bold">Consortiums</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 联盟定义</span><span style="color:#bbb">
</span><span style="color:#bbb">            </span><span style="color:#000;font-weight:bold">SampleConsortium</span>:<span style="color:#bbb">
</span><span style="color:#bbb">                </span><span style="color:#000;font-weight:bold">Organizations</span>:<span style="color:#bbb"> </span><span style="color:#998;font-style:italic"># 由 org1 和 org2 组成的联盟</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#999;font-weight:bold;font-style:italic">*Org1</span><span style="color:#bbb">
</span><span style="color:#bbb">                </span>- <span style="color:#999;font-weight:bold;font-style:italic">*Org2</span><span style="color:#bbb">
</span></code></pre></td></tr></table>
</div>
</div><p>我们之前介绍过，这个配置定义主要是用来生成<code>orderer</code>排序服务启动的创世区块用的，那么如果要使用<code>Raft</code>共识，就必须要使用这个配置来生成创世区块，我们回到<code>byfn.sh</code>启动的脚本文件中，找到生成创世区块等文件的方法<code>generateChannelArtifacts()</code>，在这个方法中，我们可以很清楚的看到，确实是根据排序服务(<code>CONSENSUS_TYPE</code>)的不一样，生成创世区块使用到的<code>-profile</code>配置也不一样，我们在<code>429</code>行位置可以看到使用<code>raft</code>共识创建创世区块的命令为：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">configtxgen -profile SampleMultiNodeEtcdRaft -channelID <span style="color:#008080">$SYS_CHANNEL</span> -outputBlock ./channel-artifacts/genesis.block
</code></pre></td></tr></table>
</div>
</div><p>很明显，指定的<code>profile</code>配置就是我们之前在<code>configtx.yaml</code>中分析了<code>SampleMultiNodeEtcdRaft</code>。</p>
<h3 id="43-启动网络并分析日志">4.3 启动网络并分析日志</h3>
<p>我们在<code>byfn.sh</code>脚本文件中的<code>536~576</code>代码行可以看到，我要想定义<code>CONSENSUS_TYPE</code>变量的值，只需要指定<code>-o</code>参数即可，所以，我们启动网络的命令为：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># 如果不在 first-network 目录，先进入该目录下</span>
<span style="color:#0086b3">cd</span> /opt/gopath/src/github.com/hyperledger/fabric/scripts/fabric-samples/first-network
<span style="color:#998;font-style:italic"># 启动网络</span>
./byfn.sh up -o etcdraft
</code></pre></td></tr></table>
</div>
</div><p>下面我们来一步步通过日志分析其过程，首先我们看到<code>Generating Orderer Genesis block</code>部分有如下输出，其中显示<code>orderer type</code>为<code>etcdraft</code>。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">/usr/local/bin/configtxgen
<span style="color:#998;font-style:italic">##########################################################</span>
<span style="color:#998;font-style:italic">#########  Generating Orderer Genesis block ##############</span>
<span style="color:#998;font-style:italic">##########################################################</span>
<span style="color:#008080">CONSENSUS_TYPE</span><span style="color:#000;font-weight:bold">=</span>etcdraft
+ <span style="color:#d14">&#39;[&#39;</span> <span style="color:#008080">etcdraft</span> <span style="color:#000;font-weight:bold">==</span> solo <span style="color:#d14">&#39;]&#39;</span>
+ <span style="color:#d14">&#39;[&#39;</span> <span style="color:#008080">etcdraft</span> <span style="color:#000;font-weight:bold">==</span> kafka <span style="color:#d14">&#39;]&#39;</span>
+ <span style="color:#d14">&#39;[&#39;</span> <span style="color:#008080">etcdraft</span> <span style="color:#000;font-weight:bold">==</span> etcdraft <span style="color:#d14">&#39;]&#39;</span>
+ configtxgen -profile SampleMultiNodeEtcdRaft -channelID byfn-sys-channel -outputBlock ./channel-artifacts/genesis.block
2019-08-21 12:30:12.493 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen<span style="color:#000;font-weight:bold">]</span> main -&gt; INFO <span style="color:#099">001</span> Loading configuration
2019-08-21 12:30:12.569 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> completeInitialization -&gt; INFO <span style="color:#099">002</span> orderer type: etcdraft
2019-08-21 12:30:12.569 EDT <span style="color:#000;font-weight:bold">[</span>common.tools.configtxgen.localconfig<span style="color:#000;font-weight:bold">]</span> completeInitialization -&gt; INFO <span style="color:#099">003</span> Orderer.EtcdRaft.Options unset, setting to tick_interval:<span style="color:#d14">&#34;500ms&#34;</span> election_tick:10 heartbeat_tick:1 max_inflight_blocks:5 snapshot_interval_size:20971520
</code></pre></td></tr></table>
</div>
</div><p>其次，我们会发现输出启动的容器如下，可以看到五个<code>orderer</code>排序服务都已经启动了。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">CONTAINER ID        IMAGE                               COMMAND             CREATED             STATUS                  PORTS                      NAMES
d6e1a0f80774        hyperledger/fabric-tools:latest     <span style="color:#d14">&#34;/bin/bash&#34;</span>         <span style="color:#099">2</span> seconds ago       Up Less than a second                              cli
d27c5b95b933        hyperledger/fabric-peer:latest      <span style="color:#d14">&#34;peer node start&#34;</span>   <span style="color:#099">9</span> seconds ago       Up <span style="color:#099">1</span> second             0.0.0.0:9051-&gt;9051/tcp     peer0.org2.example.com
e450d808e22b        hyperledger/fabric-peer:latest      <span style="color:#d14">&#34;peer node start&#34;</span>   <span style="color:#099">9</span> seconds ago       Up <span style="color:#099">1</span> second             0.0.0.0:7051-&gt;7051/tcp     peer0.org1.example.com
82be5e4a23fc        hyperledger/fabric-orderer:latest   <span style="color:#d14">&#34;orderer&#34;</span>           <span style="color:#099">9</span> seconds ago       Up <span style="color:#099">1</span> second             0.0.0.0:7050-&gt;7050/tcp     orderer.example.com
f26aa248eef3        hyperledger/fabric-peer:latest      <span style="color:#d14">&#34;peer node start&#34;</span>   <span style="color:#099">9</span> seconds ago       Up <span style="color:#099">1</span> second             0.0.0.0:8051-&gt;8051/tcp     peer1.org1.example.com
7d17062c4a6f        hyperledger/fabric-orderer:latest   <span style="color:#d14">&#34;orderer&#34;</span>           <span style="color:#099">9</span> seconds ago       Up <span style="color:#099">1</span> second             0.0.0.0:10050-&gt;7050/tcp    orderer4.example.com
7e0ac9d283bf        hyperledger/fabric-orderer:latest   <span style="color:#d14">&#34;orderer&#34;</span>           <span style="color:#099">9</span> seconds ago       Up <span style="color:#099">1</span> second             0.0.0.0:11050-&gt;7050/tcp    orderer5.example.com
2370d8cfb326        hyperledger/fabric-peer:latest      <span style="color:#d14">&#34;peer node start&#34;</span>   <span style="color:#099">9</span> seconds ago       Up <span style="color:#099">1</span> second             0.0.0.0:10051-&gt;10051/tcp   peer1.org2.example.com
0e6cbc77dd68        hyperledger/fabric-orderer:latest   <span style="color:#d14">&#34;orderer&#34;</span>           <span style="color:#099">9</span> seconds ago       Up <span style="color:#099">1</span> second             0.0.0.0:8050-&gt;7050/tcp     orderer2.example.com
dd27672debb2        hyperledger/fabric-orderer:latest   <span style="color:#d14">&#34;orderer&#34;</span>           <span style="color:#099">9</span> seconds ago       Up <span style="color:#099">1</span> second             0.0.0.0:9050-&gt;7050/tcp     orderer3.example.com
</code></pre></td></tr></table>
</div>
</div><p>在输出的启动容器列表日志下面，我们可以看到，有这里一行日志输出，翻译过来就是：睡眠<code>15</code>秒，让<code>raft</code>集群启动完成。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Sleeping 15s to allow etcdraft cluster to <span style="color:#0086b3">complete</span> booting
</code></pre></td></tr></table>
</div>
</div><p>那么这五个<code>orderer</code>节点究竟在这<code>15</code>秒干了什么，我们来看看他们的日志，首先，我们新建一个终端，使用<code>docker logs orderer.example.com</code>来查看其日志。在日志中，我们可以很容易看到，有关<code>raft</code>的日志消息一般以<code>2019-08-21 16:47:34.185 UTC [orderer.consensus.etcdraft]</code>类似的开头出现，那么我们先一步步分析<code>orderer.example.com</code>这个节点的日志。</p>
<h4 id="431-ordererexamplecom容器日志分析">4.3.1 <code>orderer.example.com</code>容器日志分析</h4>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">126
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">127
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">128
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">129
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">130
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">131
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">132
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">133
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">134
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">135
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">136
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">137
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">138
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">139
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">140
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">141
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">142
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">143
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">144
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">145
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">146
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">147
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">148
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">149
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">150
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">151
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">152
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">153
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">154
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">155
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">156
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">157
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">158
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">159
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">160
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">161
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">162
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">163
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">164
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">165
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">166
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">167
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">168
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">169
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">170
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">171
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">172
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">173
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">174
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">175
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">176
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">177
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">178
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">179
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">180
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">181
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">182
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">183
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">184
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">185
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">186
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">187
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">188
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">189
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">190
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">191
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">192
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">193
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">194
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">195
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">196
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">197
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">198
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">199
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">200
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">201
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">202
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">203
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">204
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">205
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">206
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">207
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">208
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">209
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">210
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">211
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">212
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">213
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">214
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">215
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">216
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">217
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">218
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">219
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">220
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">221
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">222
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">223
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># 本地配置完成初始化，kafka 的版本未定义，使用 0.10.2.0 版本</span>
2019-08-21 17:05:34.668 UTC <span style="color:#000;font-weight:bold">[</span>localconfig<span style="color:#000;font-weight:bold">]</span> completeInitialization -&gt; INFO <span style="color:#099">001</span> Kafka.Version unset, setting to 0.10.2.0
<span style="color:#998;font-style:italic"># 打印 orderer.example.com 节点的所有配置信息</span>
2019-08-21 17:05:34.780 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.server<span style="color:#000;font-weight:bold">]</span> prettyPrintStruct -&gt; INFO <span style="color:#099">002</span> Orderer config values:
  General.LedgerType <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;file&#34;</span>
  General.ListenAddress <span style="color:#000;font-weight:bold">=</span> <span style="color:#d14">&#34;0.0.0.0&#34;</span>
  General.ListenPort <span style="color:#000;font-weight:bold">=</span> <span style="color:#099">7050</span>
  General.TLS.Enabled <span style="color:#000;font-weight:bold">=</span> <span style="color:#0086b3">true</span>
  
  <span style="color:#998;font-style:italic">#......</span>
  <span style="color:#998;font-style:italic"># 省略相关内容</span>
  <span style="color:#998;font-style:italic">#......</span>
  
<span style="color:#998;font-style:italic"># 提前系统上次的配置：不存在配置</span>
2019-08-21 17:05:34.836 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.server<span style="color:#000;font-weight:bold">]</span> extractSysChanLastConfig -&gt; INFO <span style="color:#099">003</span> Bootstrapping because no existing channels
<span style="color:#998;font-style:italic"># 启动 orderer 节点服务，开启TLS</span>
2019-08-21 17:05:34.906 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.server<span style="color:#000;font-weight:bold">]</span> initializeServerConfig -&gt; INFO <span style="color:#099">004</span> Starting orderer with TLS enabled
<span style="color:#998;font-style:italic"># 使用默认的端口 7050</span>
2019-08-21 17:05:34.906 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.server<span style="color:#000;font-weight:bold">]</span> configureClusterListener -&gt; INFO <span style="color:#099">005</span> Cluster listener is not configured, defaulting to use the general listener on port <span style="color:#099">7050</span>
<span style="color:#998;font-style:italic"># 从提前生成的创世区块中获取区块信息</span>
2019-08-21 17:05:34.907 UTC <span style="color:#000;font-weight:bold">[</span>fsblkstorage<span style="color:#000;font-weight:bold">]</span> newBlockfileMgr -&gt; INFO <span style="color:#099">006</span> Getting block information from block storage
<span style="color:#998;font-style:italic">#（raft内容）EvictionSuspicion 没有设置，使用默认的 10m0s</span>
2019-08-21 17:05:34.944 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> HandleChain -&gt; INFO <span style="color:#099">007</span> EvictionSuspicion not set, defaulting to 10m0s
<span style="color:#998;font-style:italic">#（raft内容）WAL(Write Ahead Logs)目录的创建或读取：这个配置在orderer.yaml文件中有定义，是 raft 共识存储每个特定通道的 WAL 用到的目录，每个通道都有一个其ID名字的文件夹。这里是，创建了系统通道的文件夹(wal/byfn-sys-channel)</span>
2019-08-21 17:05:34.944 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> createOrReadWAL -&gt; INFO <span style="color:#099">008</span> No WAL data found, creating new WAL at path <span style="color:#d14">&#39;/var/hyperledger/production/orderer/etcdraft/wal/byfn-sys-channel&#39;</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）使用创世区块和 raft排序服务初始化系统通道</span>
2019-08-21 17:05:34.954 UTC <span style="color:#000;font-weight:bold">[</span>orderer.commmon.multichannel<span style="color:#000;font-weight:bold">]</span> Initialize -&gt; INFO <span style="color:#099">009</span> Starting system channel <span style="color:#d14">&#39;byfn-sys-channel&#39;</span> with genesis block <span style="color:#0086b3">hash</span> 00472d8f434b350fcddc6658e869a15a90fddba946bf65c9643a68c5c8da7417 and orderer <span style="color:#0086b3">type</span> etcdraft
<span style="color:#998;font-style:italic">#（raft内容）在系统通道 byfn-sys-channel 中启动 Raft 共识节点 node=1，</span>
2019-08-21 17:05:34.955 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Start -&gt; INFO 00a Starting Raft node <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic"># 配置与其他四个 orderer 节点进行通信的信息，包括节点地址和端口，以及TLS通信的服务端证书和客户端证书</span>
2019-08-21 17:05:34.955 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> Configure -&gt; INFO 00b Entering, channel: byfn-sys-channel, nodes: <span style="color:#000;font-weight:bold">[</span>ID: 2,
Endpoint: orderer2.example.com:7050,
ServerTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
, ClientTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
 ID: 3,
Endpoint: orderer3.example.com:7050,
ServerTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
, ClientTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
 ID: 4,
Endpoint: orderer4.example.com:7050,
ServerTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
, ClientTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
 ID: 5,
Endpoint: orderer5.example.com:7050,
ServerTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
, ClientTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
<span style="color:#000;font-weight:bold">]</span>

<span style="color:#998;font-style:italic"># 在系统通道中为 node 2 分配新的 stub，也就是指定 node 2 就是 orderer 2</span>
2019-08-21 17:05:34.955 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO 00c Allocating a new stub <span style="color:#000;font-weight:bold">for</span> node <span style="color:#099">2</span> with endpoint of orderer2.example.com:7050 <span style="color:#000;font-weight:bold">for</span> channel byfn-sys-channel
<span style="color:#998;font-style:italic"># 由于 TLS 证书的变更停用 node 2</span>
2019-08-21 17:05:34.955 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO 00d Deactivating node <span style="color:#099">2</span> in channel byfn-sys-channel with endpoint of orderer2.example.com:7050 due to TLS certificate change
<span style="color:#998;font-style:italic"># 在系统通道中为 node 3 分配新的 stub，也就是指定 node 3 就是 orderer 3</span>
2019-08-21 17:05:34.956 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO 00e Allocating a new stub <span style="color:#000;font-weight:bold">for</span> node <span style="color:#099">3</span> with endpoint of orderer3.example.com:7050 <span style="color:#000;font-weight:bold">for</span> channel byfn-sys-channel
<span style="color:#998;font-style:italic"># 由于 TLS 证书的变更停用 node 3</span>
2019-08-21 17:05:34.956 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO 00f Deactivating node <span style="color:#099">3</span> in channel byfn-sys-channel with endpoint of orderer3.example.com:7050 due to TLS certificate change
<span style="color:#998;font-style:italic"># 在系统通道中为 node 4 分配新的 stub，也就是指定 node 4 就是 orderer 4</span>
2019-08-21 17:05:34.957 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">010</span> Allocating a new stub <span style="color:#000;font-weight:bold">for</span> node <span style="color:#099">4</span> with endpoint of orderer4.example.com:7050 <span style="color:#000;font-weight:bold">for</span> channel byfn-sys-channel
<span style="color:#998;font-style:italic"># 由于 TLS 证书的变更停用 node 4</span>
2019-08-21 17:05:34.957 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">011</span> Deactivating node <span style="color:#099">4</span> in channel byfn-sys-channel with endpoint of orderer4.example.com:7050 due to TLS certificate change
<span style="color:#998;font-style:italic"># 在系统通道中为 node 5 分配新的 stub，也就是指定 node 5 就是 orderer 5</span>
2019-08-21 17:05:34.958 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">012</span> Allocating a new stub <span style="color:#000;font-weight:bold">for</span> node <span style="color:#099">5</span> with endpoint of orderer5.example.com:7050 <span style="color:#000;font-weight:bold">for</span> channel byfn-sys-channel
<span style="color:#998;font-style:italic"># 由于 TLS 证书的变更停用 node 5</span>
2019-08-21 17:05:34.961 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">013</span> Deactivating node <span style="color:#099">5</span> in channel byfn-sys-channel with endpoint of orderer5.example.com:7050 due to TLS certificate change
<span style="color:#998;font-style:italic">#  node 2 在 old And new membership 中都存在，跳过停用</span>
2019-08-21 17:05:34.961 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> applyMembershipConfig -&gt; INFO <span style="color:#099">014</span> <span style="color:#099">2</span> exists in both old and new membership <span style="color:#000;font-weight:bold">for</span> channel byfn-sys-channel , skipping its deactivation
<span style="color:#998;font-style:italic">#  node 3 在 old And new membership 中都存在，跳过停用</span>
2019-08-21 17:05:34.961 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> applyMembershipConfig -&gt; INFO <span style="color:#099">015</span> <span style="color:#099">3</span> exists in both old and new membership <span style="color:#000;font-weight:bold">for</span> channel byfn-sys-channel , skipping its deactivation
<span style="color:#998;font-style:italic">#  node 4 在 old And new membership 中都存在，跳过停用</span>
2019-08-21 17:05:34.961 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> applyMembershipConfig -&gt; INFO <span style="color:#099">016</span> <span style="color:#099">4</span> exists in both old and new membership <span style="color:#000;font-weight:bold">for</span> channel byfn-sys-channel , skipping its deactivation
<span style="color:#998;font-style:italic">#  node 5 在 old And new membership 中都存在，跳过停用</span>
2019-08-21 17:05:34.961 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> applyMembershipConfig -&gt; INFO <span style="color:#099">017</span> <span style="color:#099">5</span> exists in both old and new membership <span style="color:#000;font-weight:bold">for</span> channel byfn-sys-channel , skipping its deactivation
<span style="color:#998;font-style:italic"># 集群配置结束，退出</span>
2019-08-21 17:05:34.961 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> Configure -&gt; INFO <span style="color:#099">018</span> Exiting
<span style="color:#998;font-style:italic">#（raft内容）启动 Raft node 1 作为在系统通道 byfn-sys-channel 的一部分</span>
2019-08-21 17:05:34.961 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> start -&gt; INFO <span style="color:#099">019</span> Starting raft node as part of a new channel <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）node 1 成为 follower 在第 0 轮选举中（term 0）</span>
2019-08-21 17:05:34.961 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 01a <span style="color:#099">1</span> became follower at term <span style="color:#099">0</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
2019-08-21 17:05:34.962 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> newRaft -&gt; INFO 01b newRaft <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">[</span>peers: <span style="color:#000;font-weight:bold">[]</span>, term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）node 1 成为 follower 在第 1 轮选举中（term 1）</span>
2019-08-21 17:05:34.962 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 01c <span style="color:#099">1</span> became follower at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic"># 启动orderer节点服务</span>
2019-08-21 17:05:34.962 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.server<span style="color:#000;font-weight:bold">]</span> Start -&gt; INFO 01d Starting orderer:
 Version: 1.4.2
 Commit SHA: c6cc550
 Go version: go1.11.5
 OS/Arch: linux/amd64
<span style="color:#998;font-style:italic">#开始请求服务数据</span>
2019-08-21 17:05:34.962 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.server<span style="color:#000;font-weight:bold">]</span> Start -&gt; INFO 01e Beginning to serve requests
<span style="color:#998;font-style:italic">#（raft内容）应用配置更改，添加 node 1</span>
2019-08-21 17:05:34.974 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO 01f Applied config change to add node 1, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）应用配置更改，添加 node 2</span>
2019-08-21 17:05:34.974 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">020</span> Applied config change to add node 2, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）应用配置更改，添加 node 3</span>
2019-08-21 17:05:34.974 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">021</span> Applied config change to add node 3, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）应用配置更改，添加 node 4</span>
2019-08-21 17:05:34.975 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">022</span> Applied config change to add node 4, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）应用配置更改，添加 node 5</span>
2019-08-21 17:05:34.975 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">023</span> Applied config change to add node 5, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）从 node 5 获取到了更高选举轮数（term 2）的信息，也就是说 node 5 开始了第 2 轮选举</span>
2019-08-21 17:05:35.889 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">024</span> <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">[</span>term: 1<span style="color:#000;font-weight:bold">]</span> received a MsgApp message with higher term from <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>term: 2<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）node 1 在 第二轮选举（term 2）中成为 follower</span>
2019-08-21 17:05:35.889 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO <span style="color:#099">025</span> <span style="color:#099">1</span> became follower at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）node 1 在 第二轮选举（term 2）中选举 node 5 为 leader</span>
2019-08-21 17:05:35.889 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">026</span> raft.node: <span style="color:#099">1</span> elected leader <span style="color:#099">5</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）leader 由 node 1 变成 node 5</span>
2019-08-21 17:05:35.890 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">027</span> Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">5</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）写入 block[1] 到系统通道 byfn-sys-channel 的账本 ledger 中</span>
2019-08-21 17:05:51.500 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 02a Writing block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 7<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">## 下面是应用通道（mychannel）相关日志信息</span>
<span style="color:#998;font-style:italic"># 从创世区块中获取区块信息</span>
2019-08-21 17:05:51.521 UTC <span style="color:#000;font-weight:bold">[</span>fsblkstorage<span style="color:#000;font-weight:bold">]</span> newBlockfileMgr -&gt; INFO 02b Getting block information from block storage
<span style="color:#998;font-style:italic">#（raft内容）EvictionSuspicion 没有设置，使用默认的 10m0s</span>
2019-08-21 17:05:51.534 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> HandleChain -&gt; INFO 02c EvictionSuspicion not set, defaulting to 10m0s
<span style="color:#998;font-style:italic">#（raft内容）创建应用通道（mychannel）的WAL目录（wal/mychannel）</span>
2019-08-21 17:05:51.534 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> createOrReadWAL -&gt; INFO 02d No WAL data found, creating new WAL at path <span style="color:#d14">&#39;/var/hyperledger/production/orderer/etcdraft/wal/mychannel&#39;</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic"># 创建和启动一个新的链 mychannel</span>
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.commmon.multichannel<span style="color:#000;font-weight:bold">]</span> newChain -&gt; INFO 02e Created and starting new chain mychannel
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 中启动 Raft node</span>
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Start -&gt; INFO 02f Starting Raft node <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic"># orderer集群相关配置，包括其他四个orderer节点的地址和端口，以及TLS证书等</span>
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> Configure -&gt; INFO <span style="color:#099">030</span> Entering, channel: mychannel, nodes: <span style="color:#000;font-weight:bold">[</span>ID: 2,
Endpoint: orderer2.example.com:7050, <span style="color:#998;font-style:italic"># orderer 2</span>
ServerTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
, ClientTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
 ID: 3,
Endpoint: orderer3.example.com:7050, <span style="color:#998;font-style:italic"># orderer 3</span>
ServerTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
, ClientTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
 ID: 4,
Endpoint: orderer4.example.com:7050, <span style="color:#998;font-style:italic"># orderer 4</span>
ServerTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
, ClientTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
 ID: 5,
Endpoint: orderer5.example.com:7050, <span style="color:#998;font-style:italic"># orderer 5</span>
ServerTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
, ClientTLSCert:-----BEGIN CERTIFICATE-----
<span style="color:#998;font-style:italic"># 省略内容</span>
-----END CERTIFICATE-----
<span style="color:#000;font-weight:bold">]</span>
<span style="color:#998;font-style:italic"># 在应用通道（mychannel）中为 node 2 分配新的 stub，也就是指定 node 2 就是 orderer 2</span>
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">031</span> Allocating a new stub <span style="color:#000;font-weight:bold">for</span> node <span style="color:#099">2</span> with endpoint of orderer2.example.com:7050 <span style="color:#000;font-weight:bold">for</span> channel mychannel
<span style="color:#998;font-style:italic"># 由于 TLS 证书的变更停用 node 2</span>
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">032</span> Deactivating node <span style="color:#099">2</span> in channel mychannel with endpoint of orderer2.example.com:7050 due to TLS certificate change
<span style="color:#998;font-style:italic">## 下面日志与上类似</span>
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">033</span> Allocating a new stub <span style="color:#000;font-weight:bold">for</span> node <span style="color:#099">3</span> with endpoint of orderer3.example.com:7050 <span style="color:#000;font-weight:bold">for</span> channel mychannel
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">034</span> Deactivating node <span style="color:#099">3</span> in channel mychannel with endpoint of orderer3.example.com:7050 due to TLS certificate change
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">035</span> Allocating a new stub <span style="color:#000;font-weight:bold">for</span> node <span style="color:#099">4</span> with endpoint of orderer4.example.com:7050 <span style="color:#000;font-weight:bold">for</span> channel mychannel
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">036</span> Deactivating node <span style="color:#099">4</span> in channel mychannel with endpoint of orderer4.example.com:7050 due to TLS certificate change
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">037</span> Allocating a new stub <span style="color:#000;font-weight:bold">for</span> node <span style="color:#099">5</span> with endpoint of orderer5.example.com:7050 <span style="color:#000;font-weight:bold">for</span> channel mychannel
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> updateStubInMapping -&gt; INFO <span style="color:#099">038</span> Deactivating node <span style="color:#099">5</span> in channel mychannel with endpoint of orderer5.example.com:7050 due to TLS certificate change
<span style="color:#998;font-style:italic"># node 2 在 old And new membership 中都存在，跳过停用</span>
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> applyMembershipConfig -&gt; INFO <span style="color:#099">039</span> <span style="color:#099">2</span> exists in both old and new membership <span style="color:#000;font-weight:bold">for</span> channel mychannel , skipping its deactivation
<span style="color:#998;font-style:italic">## 下面日志与上类似</span>
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> applyMembershipConfig -&gt; INFO 03a <span style="color:#099">3</span> exists in both old and new membership <span style="color:#000;font-weight:bold">for</span> channel mychannel , skipping its deactivation
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> applyMembershipConfig -&gt; INFO 03b <span style="color:#099">4</span> exists in both old and new membership <span style="color:#000;font-weight:bold">for</span> channel mychannel , skipping its deactivation
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> applyMembershipConfig -&gt; INFO 03c <span style="color:#099">5</span> exists in both old and new membership <span style="color:#000;font-weight:bold">for</span> channel mychannel , skipping its deactivation
<span style="color:#998;font-style:italic"># 集群配置结束，退出</span>
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.cluster<span style="color:#000;font-weight:bold">]</span> Configure -&gt; INFO 03d Exiting
<span style="color:#998;font-style:italic">#（raft内容）启动 Raft node 1 作为在应用通道 mychannel 的一部分</span>
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> start -&gt; INFO 03e Starting raft node as part of a new channel <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）node 1 在第 0 轮选举（term 0）中成为 follower</span>
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 03f <span style="color:#099">1</span> became follower at term <span style="color:#099">0</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> newRaft -&gt; INFO <span style="color:#099">040</span> newRaft <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">[</span>peers: <span style="color:#000;font-weight:bold">[]</span>, term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）node 1 在第 1 轮选举（term 1）中成为 follower</span>
2019-08-21 17:05:51.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO <span style="color:#099">041</span> <span style="color:#099">1</span> became follower at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）应用配置更改，添加 node 1</span>
2019-08-21 17:05:51.548 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">042</span> Applied config change to add node 1, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">## 下面与上类型</span>
2019-08-21 17:05:51.548 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">043</span> Applied config change to add node 2, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
2019-08-21 17:05:51.548 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">044</span> Applied config change to add node 3, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
2019-08-21 17:05:51.548 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">045</span> Applied config change to add node 4, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
2019-08-21 17:05:51.548 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">046</span> Applied config change to add node 5, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 1 轮选举中 node 1 准备投票给 node 3</span>
2019-08-21 17:05:52.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">051</span> <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5, vote: 0<span style="color:#000;font-weight:bold">]</span> cast MsgPreVote <span style="color:#000;font-weight:bold">for</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）从 node 3 收到了更高选举轮数的信息，node 3 开始了第 2 轮选举</span>
2019-08-21 17:05:52.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">052</span> <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">[</span>term: 1<span style="color:#000;font-weight:bold">]</span> received a MsgVote message with higher term from <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>term: 2<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）node 1 在第 2 轮选举中成为 follower</span>
2019-08-21 17:05:52.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO <span style="color:#099">053</span> <span style="color:#099">1</span> became follower at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 2 轮选举中 node 1 准备投票给 node 3</span>
2019-08-21 17:05:52.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">054</span> <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5, vote: 0<span style="color:#000;font-weight:bold">]</span> cast MsgVote <span style="color:#000;font-weight:bold">for</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 2 轮选举中 node 1 选举 node 3 作为 leader</span>
2019-08-21 17:05:52.545 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">055</span> raft.node: <span style="color:#099">1</span> elected leader <span style="color:#099">3</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）Raft leader 由 node 0 变为 node 3</span>
2019-08-21 17:05:52.546 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">056</span> Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">3</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[1]</span>
2019-08-21 17:06:05.415 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 05d Writing block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 7<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[2]</span>
2019-08-21 17:06:08.594 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO <span style="color:#099">062</span> Writing block <span style="color:#000;font-weight:bold">[</span>2<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 8<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[3]</span>
2019-08-21 17:06:39.742 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO <span style="color:#099">065</span> Writing block <span style="color:#000;font-weight:bold">[</span>3<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 9<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[4]</span>
2019-08-21 17:07:07.938 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO <span style="color:#099">068</span> Writing block <span style="color:#000;font-weight:bold">[</span>4<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 10<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="432-orderer2examplecom容器日志分析">4.3.2 <code>orderer2.example.com</code>容器日志分析</h4>
<p>新建另一个终端，使用<code>docker logs orderer2.example.com</code>来查看其日志。由于大部分日志解释与前面<code>orderer.example.com</code>相同，这里主要看看<code>orderer2</code>的选主情况。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic">#（raft内容）启动 Raft node 2 作为在系统通道 byfn-sys-channel 的一部分</span>
2019-08-21 17:05:34.915 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> start -&gt; INFO <span style="color:#099">019</span> Starting raft node as part of a new channel <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）node 2 成为 follower 在第 0 轮选举中（term 0）</span>
2019-08-21 17:05:34.915 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 01a <span style="color:#099">2</span> became follower at term <span style="color:#099">0</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
2019-08-21 17:05:34.915 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> newRaft -&gt; INFO 01b newRaft <span style="color:#099">2</span> <span style="color:#000;font-weight:bold">[</span>peers: <span style="color:#000;font-weight:bold">[]</span>, term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）node 2 成为 follower 在第 1 轮选举中（term 1）</span>
2019-08-21 17:05:34.915 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 01c <span style="color:#099">2</span> became follower at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>

<span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic">#（raft内容）从 node 5 获取到了更高选举轮数（term 2）的信息，也就是说 node 5 开始了第 2 轮选举</span>
2019-08-21 17:05:35.886 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">025</span> <span style="color:#099">2</span> <span style="color:#000;font-weight:bold">[</span>term: 1<span style="color:#000;font-weight:bold">]</span> received a MsgVote message with higher term from <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>term: 2<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）node 2 在 第二轮选举（term 2）中成为 follower</span>
2019-08-21 17:05:35.886 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO <span style="color:#099">026</span> <span style="color:#099">2</span> became follower at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
2019-08-21 17:05:35.886 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">027</span> <span style="color:#099">2</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5, vote: 0<span style="color:#000;font-weight:bold">]</span> cast MsgVote <span style="color:#000;font-weight:bold">for</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）node 2 在 第二轮选举（term 2）中选举 node 5 为 leader</span>
2019-08-21 17:05:35.890 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">028</span> raft.node: <span style="color:#099">2</span> elected leader <span style="color:#099">5</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）leader 由 node 0 变成 node 5</span>
2019-08-21 17:05:35.890 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">029</span> Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">5</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）写入 block[1] 到系统通道 byfn-sys-channel 的账本 ledger 中</span>
2019-08-21 17:05:51.503 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 02a Writing block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 7<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>

<span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic">#（raft内容）启动 Raft node 作为在应用通道 mychannel 的一部分</span>
2019-08-21 17:05:51.547 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> start -&gt; INFO 03e Starting raft node as part of a new channel <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）node 2 在第 0 轮选举（term 0）中成为 follower</span>
2019-08-21 17:05:51.547 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 03f <span style="color:#099">2</span> became follower at term <span style="color:#099">0</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
2019-08-21 17:05:51.547 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> newRaft -&gt; INFO <span style="color:#099">040</span> newRaft <span style="color:#099">2</span> <span style="color:#000;font-weight:bold">[</span>peers: <span style="color:#000;font-weight:bold">[]</span>, term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）node 2 在第 1 轮选举（term 1）中成为 follower</span>
2019-08-21 17:05:51.547 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO <span style="color:#099">041</span> <span style="color:#099">2</span> became follower at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
2019-08-21 17:05:51.548 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">042</span> Applied config change to add node 1, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
2019-08-21 17:05:51.548 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">043</span> Applied config change to add node 2, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
2019-08-21 17:05:51.548 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">044</span> Applied config change to add node 3, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
2019-08-21 17:05:51.548 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">045</span> Applied config change to add node 4, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
2019-08-21 17:05:51.548 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">046</span> Applied config change to add node 5, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 1 轮选举中 node 2 准备投票给 node 3</span>
2019-08-21 17:05:52.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">047</span> <span style="color:#099">2</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5, vote: 0<span style="color:#000;font-weight:bold">]</span> cast MsgPreVote <span style="color:#000;font-weight:bold">for</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）从 node 3 收到了更高选举轮数的信息，node 3 开始了第 2 轮选举</span>
2019-08-21 17:05:52.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">048</span> <span style="color:#099">2</span> <span style="color:#000;font-weight:bold">[</span>term: 1<span style="color:#000;font-weight:bold">]</span> received a MsgVote message with higher term from <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>term: 2<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）node 2 在第 2 轮选举中成为 follower</span>
2019-08-21 17:05:52.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO <span style="color:#099">049</span> <span style="color:#099">2</span> became follower at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 2 轮选举中 node 2 准备投票给 node 3</span>
2019-08-21 17:05:52.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO 04a <span style="color:#099">2</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5, vote: 0<span style="color:#000;font-weight:bold">]</span> cast MsgVote <span style="color:#000;font-weight:bold">for</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 2 轮选举中 node 2 选举 node 3 作为 leader</span>
2019-08-21 17:05:52.545 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO 04b raft.node: <span style="color:#099">2</span> elected leader <span style="color:#099">3</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">#（raft内容）Raft leader 由 node 0 变为 node 3</span>
2019-08-21 17:05:52.545 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO 04c Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">3</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic">## 下面是产生交易后写入了 block</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[1]</span>
2019-08-21 17:06:05.409 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 04d Writing block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 7<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
2019-08-21 17:06:08.577 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 04e Writing block <span style="color:#000;font-weight:bold">[</span>2<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 8<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
2019-08-21 17:06:39.748 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 04f Writing block <span style="color:#000;font-weight:bold">[</span>3<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 9<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
2019-08-21 17:07:07.941 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO <span style="color:#099">050</span> Writing block <span style="color:#000;font-weight:bold">[</span>4<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 10<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="433-orderer3examplecom容器日志分析">4.3.3 <code>orderer3.example.com</code>容器日志分析</h4>
<p>新建另一个终端，使用<code>docker logs orderer3.example.com</code>来查看其日志。同样也是进行选主分析</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic">#（raft内容）启动 Raft node 3 作为在系统通道 byfn-sys-channel 的一部分</span>
2019-08-21 17:05:33.015 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> start -&gt; INFO <span style="color:#099">019</span> Starting raft node as part of a new channel <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 成为 follower 在第 0 轮选举中（term 0）</span>
2019-08-21 17:05:33.015 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 01a <span style="color:#099">3</span> became follower at term <span style="color:#099">0</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:33.015 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> newRaft -&gt; INFO 01b newRaft <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>peers: <span style="color:#000;font-weight:bold">[]</span>, term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 成为 follower 在第 1 轮选举中（term 1）</span>
2019-08-21 17:05:33.015 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 01c <span style="color:#099">3</span> became follower at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>

<span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic">#（raft内容）从 node 5 获取到了更高选举轮数（term 2）的信息，也就是说 node 5 开始了第 2 轮选举</span>
2019-08-21 17:05:35.886 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">025</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>term: 1<span style="color:#000;font-weight:bold">]</span> received a MsgVote message with higher term from <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>term: 2<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在 第二轮选举（term 2）中成为 follower</span>
2019-08-21 17:05:35.886 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO <span style="color:#099">026</span> <span style="color:#099">3</span> became follower at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:35.886 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">027</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5, vote: 0<span style="color:#000;font-weight:bold">]</span> cast MsgVote <span style="color:#000;font-weight:bold">for</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在 第二轮选举（term 2）中选举 node 5 为 leader</span>
2019-08-21 17:05:35.890 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">028</span> raft.node: <span style="color:#099">3</span> elected leader <span style="color:#099">5</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）leader 由 node 0 变成 node 5</span>
2019-08-21 17:05:35.890 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">029</span> Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">5</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）写入 block[1] 到系统通道 byfn-sys-channel 的账本 ledger 中</span>
2019-08-21 17:05:51.500 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 02a Writing block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 7<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>

<span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic">#（raft内容）启动 Raft node 作为在应用通道 mychannel 的一部分</span>
2019-08-21 17:05:51.539 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> start -&gt; INFO 03e Starting raft node as part of a new channel <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 0 轮选举（term 0）中成为 follower</span>
2019-08-21 17:05:51.539 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 03f <span style="color:#099">3</span> became follower at term <span style="color:#099">0</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:51.539 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> newRaft -&gt; INFO <span style="color:#099">040</span> newRaft <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>peers: <span style="color:#000;font-weight:bold">[]</span>, term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 1 轮选举（term 1）中成为 follower</span>
2019-08-21 17:05:51.539 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO <span style="color:#099">041</span> <span style="color:#099">3</span> became follower at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 被选择开始广播</span>
2019-08-21 17:05:51.539 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">042</span> This node is picked to start campaign <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:51.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">043</span> Applied config change to add node 1, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:51.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">044</span> Applied config change to add node 2, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:51.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">045</span> Applied config change to add node 3, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:51.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">046</span> Applied config change to add node 4, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:51.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">047</span> Applied config change to add node 5, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 1 轮选举（trem 1）中开始了选举</span>
2019-08-21 17:05:52.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">048</span> <span style="color:#099">3</span> is starting a new election at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 1 轮选举（trem 1）中成为候选者</span>
2019-08-21 17:05:52.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomePreCandidate -&gt; INFO <span style="color:#099">049</span> <span style="color:#099">3</span> became pre-candidate at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 1 轮选举（trem 1）中收到了来自 node 3 的投票</span>
2019-08-21 17:05:52.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO 04a <span style="color:#099">3</span> received MsgPreVoteResp from <span style="color:#099">3</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 1 轮选举（trem 1）中发送消息请求 node 1 为自己投票</span>
2019-08-21 17:05:52.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO 04b <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgPreVote request to <span style="color:#099">1</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 1 轮选举（trem 1）中发送消息请求 node 2 为自己投票</span>
2019-08-21 17:05:52.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO 04c <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgPreVote request to <span style="color:#099">2</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 1 轮选举（trem 1）中发送消息请求 node 4 为自己投票</span>
2019-08-21 17:05:52.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO 04d <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgPreVote request to <span style="color:#099">4</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 1 轮选举（trem 1）中发送消息请求 node 5 为自己投票</span>
2019-08-21 17:05:52.540 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO 04e <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgPreVote request to <span style="color:#099">5</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 1 轮选举（trem 1）中收到了来自 node 5 的投票</span>
2019-08-21 17:05:52.542 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO 04f <span style="color:#099">3</span> received MsgPreVoteResp from <span style="color:#099">5</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:52.542 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> stepCandidate -&gt; INFO <span style="color:#099">050</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>quorum:3<span style="color:#000;font-weight:bold">]</span> has received <span style="color:#099">2</span> MsgPreVoteResp votes and <span style="color:#099">0</span> vote rejections <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 1 轮选举（trem 1）中收到了来自 node 1 的投票</span>
2019-08-21 17:05:52.542 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO <span style="color:#099">051</span> <span style="color:#099">3</span> received MsgPreVoteResp from <span style="color:#099">1</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:52.542 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> stepCandidate -&gt; INFO <span style="color:#099">052</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>quorum:3<span style="color:#000;font-weight:bold">]</span> has received <span style="color:#099">3</span> MsgPreVoteResp votes and <span style="color:#099">0</span> vote rejections <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 2 轮选举（term 2）中成为候选者</span>
2019-08-21 17:05:52.542 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeCandidate -&gt; INFO <span style="color:#099">053</span> <span style="color:#099">3</span> became candidate at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 2 轮选举（trem 2）中收到了来自 node 3 的投票</span>
2019-08-21 17:05:52.542 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO <span style="color:#099">054</span> <span style="color:#099">3</span> received MsgVoteResp from <span style="color:#099">3</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 2 轮选举（trem 2）中发送消息请求 node 5 为自己投票</span>
2019-08-21 17:05:52.542 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO <span style="color:#099">055</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgVote request to <span style="color:#099">5</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 2 轮选举（trem 2）中发送消息请求 node 1 为自己投票</span>
2019-08-21 17:05:52.542 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO <span style="color:#099">056</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgVote request to <span style="color:#099">1</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 2 轮选举（trem 2）中发送消息请求 node 2 为自己投票</span>
2019-08-21 17:05:52.542 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO <span style="color:#099">057</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgVote request to <span style="color:#099">2</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 2 轮选举（trem 2）中发送消息请求 node 4 为自己投票</span>
2019-08-21 17:05:52.542 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO <span style="color:#099">058</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgVote request to <span style="color:#099">4</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 2 轮选举（trem 2）中收到了来自 node 5 的投票</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO <span style="color:#099">059</span> <span style="color:#099">3</span> received MsgVoteResp from <span style="color:#099">5</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> stepCandidate -&gt; INFO 05a <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>quorum:3<span style="color:#000;font-weight:bold">]</span> has received <span style="color:#099">2</span> MsgVoteResp votes and <span style="color:#099">0</span> vote rejections <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在第 2 轮选举（trem 2）中收到了来自 node 2 的投票</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO 05b <span style="color:#099">3</span> received MsgVoteResp from <span style="color:#099">2</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> stepCandidate -&gt; INFO 05c <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>quorum:3<span style="color:#000;font-weight:bold">]</span> has received <span style="color:#099">3</span> MsgVoteResp votes and <span style="color:#099">0</span> vote rejections <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在 第 2 轮选举（term 2）成为了 leader</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeLeader -&gt; INFO 05d <span style="color:#099">3</span> became leader at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）node 3 在 第 2 轮选举（term 2）中选举 node 3 为 leader</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO 05e raft.node: <span style="color:#099">3</span> elected leader <span style="color:#099">3</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）Leader 3 准备就绪，退出选举活动</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO 05f Leader <span style="color:#099">3</span> is present, quit campaign <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）leader 由 node 1 变成 node 3</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">060</span> Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">3</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）作为 leader 开始接受请求</span>
2019-08-21 17:05:52.546 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">061</span> Start accepting requests as Raft leader at block <span style="color:#000;font-weight:bold">[</span>0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）创建 block[1]</span>
2019-08-21 17:06:05.400 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> propose -&gt; INFO <span style="color:#099">062</span> Created block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span>, there are <span style="color:#099">0</span> blocks in flight <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）收到提交交易信息，暂停接受交易直到交易被提交</span>
2019-08-21 17:06:05.400 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">063</span> Received config transaction, pause accepting transaction till it is committed <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[1]，也就是提交交易</span>
2019-08-21 17:06:05.406 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO <span style="color:#099">064</span> Writing block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 7<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）创建 block[2]</span>
2019-08-21 17:06:08.560 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> propose -&gt; INFO <span style="color:#099">065</span> Created block <span style="color:#000;font-weight:bold">[</span>2<span style="color:#000;font-weight:bold">]</span>, there are <span style="color:#099">0</span> blocks in flight <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）收到提交交易信息，暂停接受交易直到交易被提交</span>
2019-08-21 17:06:08.560 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">066</span> Received config transaction, pause accepting transaction till it is committed <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[2]，也就是提交交易</span>
2019-08-21 17:06:08.570 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO <span style="color:#099">067</span> Writing block <span style="color:#000;font-weight:bold">[</span>2<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 8<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）创建 block[3]</span>
2019-08-21 17:06:39.729 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> propose -&gt; INFO <span style="color:#099">068</span> Created block <span style="color:#000;font-weight:bold">[</span>3<span style="color:#000;font-weight:bold">]</span>, there are <span style="color:#099">0</span> blocks in flight <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[3]</span>
2019-08-21 17:06:39.737 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO <span style="color:#099">069</span> Writing block <span style="color:#000;font-weight:bold">[</span>3<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 9<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）创建 block[4]</span>
2019-08-21 17:07:07.928 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> propose -&gt; INFO 06a Created block <span style="color:#000;font-weight:bold">[</span>4<span style="color:#000;font-weight:bold">]</span>, there are <span style="color:#099">0</span> blocks in flight <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[4]</span>
2019-08-21 17:07:07.937 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 06b Writing block <span style="color:#000;font-weight:bold">[</span>4<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 10<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="434-orderer4examplecom容器日志分析">4.3.4 <code>orderer4.example.com</code>容器日志分析</h4>
<p>新建另一个终端，使用<code>docker logs orderer4.example.com</code>来查看其日志。同样也是进行选主分析。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic">#（raft内容）启动 Raft node 4 作为在系统通道 byfn-sys-channel 的一部分</span>
2019-08-21 17:05:35.043 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> start -&gt; INFO <span style="color:#099">019</span> Starting raft node as part of a new channel <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）node 4 成为 follower 在第 0 轮选举中（term 0）</span>
2019-08-21 17:05:35.043 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 01a <span style="color:#099">4</span> became follower at term <span style="color:#099">0</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
2019-08-21 17:05:35.043 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> newRaft -&gt; INFO 01b newRaft <span style="color:#099">4</span> <span style="color:#000;font-weight:bold">[</span>peers: <span style="color:#000;font-weight:bold">[]</span>, term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）node 4 成为 follower 在第 1 轮选举中（term 1）</span>
2019-08-21 17:05:35.043 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 01c <span style="color:#099">4</span> became follower at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>

<span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic">#（raft内容）从 node 5 获取到了更高选举轮数（term 2）的信息，也就是说 node 5 开始了第 2 轮选举</span>
2019-08-21 17:05:35.889 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">024</span> <span style="color:#099">4</span> <span style="color:#000;font-weight:bold">[</span>term: 1<span style="color:#000;font-weight:bold">]</span> received a MsgApp message with higher term from <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>term: 2<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）node 4 在 第二轮选举（term 2）中成为 follower</span>
2019-08-21 17:05:35.889 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO <span style="color:#099">025</span> <span style="color:#099">4</span> became follower at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）node 4 在 第二轮选举（term 2）中选举 node 5 为 leader</span>
2019-08-21 17:05:35.889 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">026</span> raft.node: <span style="color:#099">4</span> elected leader <span style="color:#099">5</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）leader 由 node 0 变成 node 5</span>
2019-08-21 17:05:35.891 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">027</span> Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">5</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）写入 block[1] 到系统通道 byfn-sys-channel 的账本 ledger 中</span>
2019-08-21 17:05:51.507 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO <span style="color:#099">028</span> Writing block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 7<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>

<span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic">#（raft内容）启动 Raft node 作为在应用通道 mychannel 的一部分</span>
2019-08-21 17:05:51.536 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> start -&gt; INFO 03c Starting raft node as part of a new channel <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）node 4 在第 0 轮选举（term 0）中成为 follower</span>
2019-08-21 17:05:51.536 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 03d <span style="color:#099">4</span> became follower at term <span style="color:#099">0</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
2019-08-21 17:05:51.536 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> newRaft -&gt; INFO 03e newRaft <span style="color:#099">4</span> <span style="color:#000;font-weight:bold">[</span>peers: <span style="color:#000;font-weight:bold">[]</span>, term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）node 4 在第 1 轮选举（term 1）中成为 follower</span>
2019-08-21 17:05:51.536 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 03f <span style="color:#099">4</span> became follower at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">040</span> Applied config change to add node 1, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">041</span> Applied config change to add node 2, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">042</span> Applied config change to add node 3, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">043</span> Applied config change to add node 4, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
2019-08-21 17:05:51.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">044</span> Applied config change to add node 5, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 1 轮选举中 node 4 准备投票给 node 3</span>
2019-08-21 17:05:52.542 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">045</span> <span style="color:#099">4</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5, vote: 0<span style="color:#000;font-weight:bold">]</span> cast MsgPreVote <span style="color:#000;font-weight:bold">for</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）从 node 3 收到了更高选举轮数的信息，node 3 开始了第 2 轮选举</span>
2019-08-21 17:05:52.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">046</span> <span style="color:#099">4</span> <span style="color:#000;font-weight:bold">[</span>term: 1<span style="color:#000;font-weight:bold">]</span> received a MsgVote message with higher term from <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>term: 2<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）node 4 在第 2 轮选举中成为 follower</span>
2019-08-21 17:05:52.543 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO <span style="color:#099">047</span> <span style="color:#099">4</span> became follower at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 2 轮选举中 node 4 准备投票给 node 3</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">048</span> <span style="color:#099">4</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5, vote: 0<span style="color:#000;font-weight:bold">]</span> cast MsgVote <span style="color:#000;font-weight:bold">for</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 2 轮选举中 node 4 选举 node 3 作为 leader</span>
2019-08-21 17:05:52.545 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">049</span> raft.node: <span style="color:#099">4</span> elected leader <span style="color:#099">3</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">#（raft内容）Raft leader 由 node 0 变为 node 3</span>
2019-08-21 17:05:52.547 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO 04a Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">3</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
<span style="color:#998;font-style:italic">## 下面是产生交易后写入了 block</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[1]</span>
2019-08-21 17:06:05.412 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 04b Writing block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 7<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
2019-08-21 17:06:08.577 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 04c Writing block <span style="color:#000;font-weight:bold">[</span>2<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 8<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
2019-08-21 17:06:39.746 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 04d Writing block <span style="color:#000;font-weight:bold">[</span>3<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 9<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
2019-08-21 17:07:07.942 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 04e Writing block <span style="color:#000;font-weight:bold">[</span>4<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 10<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">4</span>
</code></pre></td></tr></table>
</div>
</div><h4 id="435-orderer5examplecom容器日志分析">4.3.5 <code>orderer5.example.com</code>容器日志分析</h4>
<p>新建另一个终端，使用<code>docker logs orderer5.example.com</code>来查看其日志。同样也是进行选主分析。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">  9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 69
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 70
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 71
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 72
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 73
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 74
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 75
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 76
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 77
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 78
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 79
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 80
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 81
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 82
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 83
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 84
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 85
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 86
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 87
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 88
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 89
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 90
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 91
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 92
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 93
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 94
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 95
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 96
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 97
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 98
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 99
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">100
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">101
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">102
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">103
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">104
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">105
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">106
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">107
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">108
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">109
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">110
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">111
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">112
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">113
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">114
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">115
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">116
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">117
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">118
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">119
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">120
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">121
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">122
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">123
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">124
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">125
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic">#（raft内容）启动 Raft node 5 作为在系统通道 byfn-sys-channel 的一部分</span>
2019-08-21 17:05:34.876 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> start -&gt; INFO <span style="color:#099">019</span> Starting raft node as part of a new channel <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 成为 follower 在第 0 轮选举中（term 0）</span>
2019-08-21 17:05:34.876 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 01a <span style="color:#099">5</span> became follower at term <span style="color:#099">0</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:34.876 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> newRaft -&gt; INFO 01b newRaft <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>peers: <span style="color:#000;font-weight:bold">[]</span>, term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 成为 follower 在第 1 轮选举中（term 1）</span>
2019-08-21 17:05:34.876 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 01c <span style="color:#099">5</span> became follower at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:34.878 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.server<span style="color:#000;font-weight:bold">]</span> Start -&gt; INFO 01d Starting orderer:
 Version: 1.4.2
 Commit SHA: c6cc550
 Go version: go1.11.5
 OS/Arch: linux/amd64
2019-08-21 17:05:34.878 UTC <span style="color:#000;font-weight:bold">[</span>orderer.common.server<span style="color:#000;font-weight:bold">]</span> Start -&gt; INFO 01e Beginning to serve requests
<span style="color:#998;font-style:italic">#（raft内容）node 5 被选择开始选举活动</span>
2019-08-21 17:05:34.879 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO 01f This node is picked to start campaign <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:34.886 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">020</span> Applied config change to add node 1, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:34.886 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">021</span> Applied config change to add node 2, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:34.886 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">022</span> Applied config change to add node 3, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:34.886 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">023</span> Applied config change to add node 4, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:34.886 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">024</span> Applied config change to add node 5, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 1 轮选举（trem 1）中开始了选举</span>
2019-08-21 17:05:35.880 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">025</span> <span style="color:#099">5</span> is starting a new election at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 1 轮选举（trem 1）中成为候选者</span>
2019-08-21 17:05:35.880 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomePreCandidate -&gt; INFO <span style="color:#099">026</span> <span style="color:#099">5</span> became pre-candidate at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 1 轮选举（trem 1）中收到了来自 node 5 的投票</span>
2019-08-21 17:05:35.880 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO <span style="color:#099">027</span> <span style="color:#099">5</span> received MsgPreVoteResp from <span style="color:#099">5</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 1 轮选举（trem 1）中发送消息请求 node 1 为自己投票</span>
2019-08-21 17:05:35.880 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO <span style="color:#099">028</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgPreVote request to <span style="color:#099">1</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 1 轮选举（trem 1）中发送消息请求 node 2 为自己投票</span>
2019-08-21 17:05:35.880 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO <span style="color:#099">029</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgPreVote request to <span style="color:#099">2</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 1 轮选举（trem 1）中发送消息请求 node 3 为自己投票</span>
2019-08-21 17:05:35.880 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO 02a <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgPreVote request to <span style="color:#099">3</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 1 轮选举（trem 1）中发送消息请求 node 4 为自己投票</span>
2019-08-21 17:05:35.881 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO 02b <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgPreVote request to <span style="color:#099">4</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）发送消息请求给 node 1 失败了，由于连接不上 node 1</span>
2019-08-21 17:05:35.881 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> logSendFailure -&gt; ERRO 02c Failed to send StepRequest to 1, because: connection to 1<span style="color:#000;font-weight:bold">(</span>orderer.example.com:7050<span style="color:#000;font-weight:bold">)</span> is in state CONNECTING <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）发送消息请求给 node 4 失败了，由于连接不上 node 4</span>
2019-08-21 17:05:35.881 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> logSendFailure -&gt; ERRO 02d Failed to send StepRequest to 4, because: connection to 4<span style="color:#000;font-weight:bold">(</span>orderer4.example.com:7050<span style="color:#000;font-weight:bold">)</span> is in state CONNECTING <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 1 轮选举（trem 1）中收到了来自 node 3 的投票</span>
2019-08-21 17:05:35.885 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO 02e <span style="color:#099">5</span> received MsgPreVoteResp from <span style="color:#099">3</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:35.885 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> stepCandidate -&gt; INFO 02f <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>quorum:3<span style="color:#000;font-weight:bold">]</span> has received <span style="color:#099">2</span> MsgPreVoteResp votes and <span style="color:#099">0</span> vote rejections <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 1 轮选举（trem 1）中收到了来自 node 2 的投票</span>
2019-08-21 17:05:35.885 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO <span style="color:#099">030</span> <span style="color:#099">5</span> received MsgPreVoteResp from <span style="color:#099">2</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:35.885 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> stepCandidate -&gt; INFO <span style="color:#099">031</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>quorum:3<span style="color:#000;font-weight:bold">]</span> has received <span style="color:#099">3</span> MsgPreVoteResp votes and <span style="color:#099">0</span> vote rejections <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 2 轮选举（term 2）中成为候选者</span>
2019-08-21 17:05:35.885 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeCandidate -&gt; INFO <span style="color:#099">032</span> <span style="color:#099">5</span> became candidate at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 2 轮选举（trem 2）中收到了来自 node 3 的投票</span>
2019-08-21 17:05:35.885 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO <span style="color:#099">033</span> <span style="color:#099">5</span> received MsgVoteResp from <span style="color:#099">5</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 2 轮选举（trem 2）中发送消息请求 node 1 为自己投票</span>
2019-08-21 17:05:35.885 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO <span style="color:#099">034</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgVote request to <span style="color:#099">1</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 2 轮选举（trem 2）中发送消息请求 node 2 为自己投票</span>
2019-08-21 17:05:35.885 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO <span style="color:#099">035</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgVote request to <span style="color:#099">2</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 2 轮选举（trem 2）中发送消息请求 node 3 为自己投票</span>
2019-08-21 17:05:35.885 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO <span style="color:#099">036</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgVote request to <span style="color:#099">3</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 2 轮选举（trem 2）中发送消息请求 node 4 为自己投票</span>
2019-08-21 17:05:35.885 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> campaign -&gt; INFO <span style="color:#099">037</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> sent MsgVote request to <span style="color:#099">4</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 2 轮选举（trem 2）中收到了来自 node 2 的投票</span>
2019-08-21 17:05:35.887 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO <span style="color:#099">038</span> <span style="color:#099">5</span> received MsgVoteResp from <span style="color:#099">2</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:35.888 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> stepCandidate -&gt; INFO <span style="color:#099">039</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>quorum:3<span style="color:#000;font-weight:bold">]</span> has received <span style="color:#099">2</span> MsgVoteResp votes and <span style="color:#099">0</span> vote rejections <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 2 轮选举（trem 2）中收到了来自 node 3 的投票</span>
2019-08-21 17:05:35.888 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO 03a <span style="color:#099">5</span> received MsgVoteResp from <span style="color:#099">3</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:35.888 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> stepCandidate -&gt; INFO 03b <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>quorum:3<span style="color:#000;font-weight:bold">]</span> has received <span style="color:#099">3</span> MsgVoteResp votes and <span style="color:#099">0</span> vote rejections <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在 第 2 轮选举（term 2）成为了 leader</span>
2019-08-21 17:05:35.888 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeLeader -&gt; INFO 03c <span style="color:#099">5</span> became leader at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在 第 2 轮选举（term 2）中选举 node 5 为 leader</span>
2019-08-21 17:05:35.888 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO 03d raft.node: <span style="color:#099">5</span> elected leader <span style="color:#099">5</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）Leader 5 准备就绪，退出选举活动</span>
2019-08-21 17:05:35.888 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO 03e Leader <span style="color:#099">5</span> is present, quit campaign <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）成功发送消息请求给 node 1</span>
2019-08-21 17:05:35.888 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> send -&gt; INFO 03f Successfully sent StepRequest to <span style="color:#099">1</span> after failed attempt<span style="color:#000;font-weight:bold">(</span>s<span style="color:#000;font-weight:bold">)</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）成功发送消息请求给 node 4</span>
2019-08-21 17:05:35.888 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> send -&gt; INFO <span style="color:#099">040</span> Successfully sent StepRequest to <span style="color:#099">4</span> after failed attempt<span style="color:#000;font-weight:bold">(</span>s<span style="color:#000;font-weight:bold">)</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）leader 由 node 0 变成 node 5</span>
2019-08-21 17:05:35.888 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">041</span> Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">5</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）作为 leader 开始接受请求</span>
2019-08-21 17:05:35.890 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">042</span> Start accepting requests as Raft leader at block <span style="color:#000;font-weight:bold">[</span>0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）创建 block[1]</span>
2019-08-21 17:05:51.492 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> propose -&gt; INFO <span style="color:#099">043</span> Created block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span>, there are <span style="color:#099">0</span> blocks in flight <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）收到提交交易信息，暂停接受交易直到交易被提交</span>
2019-08-21 17:05:51.492 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">044</span> Received config transaction, pause accepting transaction till it is committed <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[1]，也就是提交交易</span>
2019-08-21 17:05:51.499 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO <span style="color:#099">045</span> Writing block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 7<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>byfn-sys-channel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>

<span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic">#（raft内容）启动 Raft node 作为在应用通道 mychannel 的一部分</span>
2019-08-21 17:05:51.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> start -&gt; INFO <span style="color:#099">059</span> Starting raft node as part of a new channel <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 0 轮选举（term 0）中成为 follower</span>
2019-08-21 17:05:51.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 05a <span style="color:#099">5</span> became follower at term <span style="color:#099">0</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:51.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> newRaft -&gt; INFO 05b newRaft <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>peers: <span style="color:#000;font-weight:bold">[]</span>, term: 0, commit: 0, applied: 0, lastindex: 0, lastterm: 0<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 1 轮选举（term 1）中成为 follower</span>
2019-08-21 17:05:51.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO 05c <span style="color:#099">5</span> became follower at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:51.551 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO 05d Applied config change to add node 1, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:51.551 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO 05e Applied config change to add node 2, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:51.551 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO 05f Applied config change to add node 3, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:51.551 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">060</span> Applied config change to add node 4, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:05:51.551 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> apply -&gt; INFO <span style="color:#099">061</span> Applied config change to add node 5, current nodes in channel: <span style="color:#000;font-weight:bold">[</span><span style="color:#099">1</span> <span style="color:#099">2</span> <span style="color:#099">3</span> <span style="color:#099">4</span> 5<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 1 轮选举中 node 5 准备投票给 node 3</span>
2019-08-21 17:05:52.541 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">062</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5, vote: 0<span style="color:#000;font-weight:bold">]</span> cast MsgPreVote <span style="color:#000;font-weight:bold">for</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> at term <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）从 node 3 收到了更高选举轮数的信息，node 3 开始了第 2 轮选举</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">063</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>term: 1<span style="color:#000;font-weight:bold">]</span> received a MsgVote message with higher term from <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>term: 2<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）node 5 在第 2 轮选举中成为 follower</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeFollower -&gt; INFO <span style="color:#099">064</span> <span style="color:#099">5</span> became follower at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 2 轮选举中 node 5 准备投票给 node 3</span>
2019-08-21 17:05:52.544 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> Step -&gt; INFO <span style="color:#099">065</span> <span style="color:#099">5</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5, vote: 0<span style="color:#000;font-weight:bold">]</span> cast MsgVote <span style="color:#000;font-weight:bold">for</span> <span style="color:#099">3</span> <span style="color:#000;font-weight:bold">[</span>logterm: 1, index: 5<span style="color:#000;font-weight:bold">]</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）在第 2 轮选举中 node 5 选举 node 3 作为 leader</span>
2019-08-21 17:05:52.545 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">066</span> raft.node: <span style="color:#099">5</span> elected leader <span style="color:#099">3</span> at term <span style="color:#099">2</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">#（raft内容）Raft leader 由 node 0 变为 node 3</span>
2019-08-21 17:05:52.545 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">067</span> Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">3</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
<span style="color:#998;font-style:italic">## 下面是产生交易后写入了 block</span>
<span style="color:#998;font-style:italic">#（raft内容）在应用通道 mychannel 的账本 ledger 上写入 block[1]</span>
2019-08-21 17:06:05.409 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO <span style="color:#099">068</span> Writing block <span style="color:#000;font-weight:bold">[</span>1<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 7<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:06:08.576 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO <span style="color:#099">069</span> Writing block <span style="color:#000;font-weight:bold">[</span>2<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 8<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:06:39.742 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 06a Writing block <span style="color:#000;font-weight:bold">[</span>3<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 9<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
2019-08-21 17:07:07.940 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 06b Writing block <span style="color:#000;font-weight:bold">[</span>4<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 10<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">5</span>
</code></pre></td></tr></table>
</div>
</div><p>通过上面对五个<code>orderer</code>节点容器服务的日志分析，我们可以很清楚看到，在系统通道<code>byfn-sys-channel</code>和应用通道<code>mychannel</code>上都进行了选举活，在系统通道(<code>byfn-sys-channel</code>)了一共进行了两轮选举，最后选择<code>orderer5.example.com</code>作为<code>leader</code>。在应用通道(<code>mychannel</code>)上也进行了两轮选举，最后选出<code>orderer3.example.com</code>作为<code>leader</code>。</p>
<h2 id="5-验证-raft-共识的容错功能">5. 验证 Raft 共识的容错功能</h2>
<p>为了验证 <code>Raft</code>共识的容错机制，我们手动关闭几个<code>orderer</code>节点容器，通过日志来看看<code>raft</code>是如何进行处理的。首先使用下面的命令关闭现在应用通道中的<code>leader</code>，也就是<code>orderer3.example.com</code>:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker stop orderer3.example.com
</code></pre></td></tr></table>
</div>
</div><p>然后我们在来看其余四个<code>orderer</code>节点的日志情况</p>
<p><strong><code>orderer.example.com</code>日志情况</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># 发送请求给 node 3 失败，由于 node 3 退出了（离线）</span>
2019-08-21 21:47:17.106 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> logSendFailure -&gt; ERRO <span style="color:#099">080</span> Failed to send StepRequest to 3, because: aborted <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic"># node 1 在第 3 轮选举中收到了 node 4 的投票</span>
2019-08-21 21:47:17.113 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO <span style="color:#099">081</span> <span style="color:#099">1</span> received MsgVoteResp from <span style="color:#099">4</span> at term <span style="color:#099">3</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
2019-08-21 21:47:17.113 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> stepCandidate -&gt; INFO <span style="color:#099">082</span> <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">[</span>quorum:3<span style="color:#000;font-weight:bold">]</span> has received <span style="color:#099">2</span> MsgVoteResp votes and <span style="color:#099">0</span> vote rejections <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic"># node 1 在第 3 轮选举中收到了 node 5 的投票</span>
2019-08-21 21:47:17.119 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> poll -&gt; INFO <span style="color:#099">083</span> <span style="color:#099">1</span> received MsgVoteResp from <span style="color:#099">5</span> at term <span style="color:#099">3</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
2019-08-21 21:47:17.119 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> stepCandidate -&gt; INFO <span style="color:#099">084</span> <span style="color:#099">1</span> <span style="color:#000;font-weight:bold">[</span>quorum:3<span style="color:#000;font-weight:bold">]</span> has received <span style="color:#099">3</span> MsgVoteResp votes and <span style="color:#099">0</span> vote rejections <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic"># node 1 在第 3 轮选举中成为 leader</span>
2019-08-21 21:47:17.119 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> becomeLeader -&gt; INFO <span style="color:#099">085</span> <span style="color:#099">1</span> became leader at term <span style="color:#099">3</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic"># node 1 在第 3 轮中选择 node 1为 leader</span>
2019-08-21 21:47:17.119 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">086</span> raft.node: <span style="color:#099">1</span> elected leader <span style="color:#099">1</span> at term <span style="color:#099">3</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic"># leader 由 node 0 变为 node 1</span>
2019-08-21 21:47:17.122 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">087</span> Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
<span style="color:#998;font-style:italic"># 在 block[4] 的位置开始接受请求</span>
2019-08-21 21:47:17.125 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">088</span> Start accepting requests as Raft leader at block <span style="color:#000;font-weight:bold">[</span>4<span style="color:#000;font-weight:bold">]</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">1</span>
</code></pre></td></tr></table>
</div>
</div><p><strong><code>orderer2.example.com</code>日志情况</strong></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># .......</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># 省略内容</span>
<span style="color:#998;font-style:italic"># .........</span>
<span style="color:#998;font-style:italic"># .......</span>

<span style="color:#998;font-style:italic"># node 2 在第 3 轮选举中失去了 leader 3</span>
2019-08-21 21:47:17.116 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">057</span> raft.node: <span style="color:#099">2</span> lost leader <span style="color:#099">3</span> at term <span style="color:#099">3</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic"># node 2 在第 3 轮选举中选择 node 1 成为 leader</span>
2019-08-21 21:47:17.124 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">058</span> raft.node: <span style="color:#099">2</span> elected leader <span style="color:#099">1</span> at term <span style="color:#099">3</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic"># leader 由 node 3 变为 node 1</span>
2019-08-21 21:47:17.133 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">059</span> Raft leader changed: <span style="color:#099">3</span> -&gt; <span style="color:#099">0</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic"># leader 由 node 0 变为 node 1</span>
2019-08-21 21:47:17.133 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO 05a Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">1</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
</code></pre></td></tr></table>
</div>
</div><p><code>orderer4</code>和<code>orderer5</code>的日志情况与<code>orderer2</code>相同，都是在第<code>3</code>轮选举中选择了<code>orderer1.example.com</code>成为<code>leader</code>。</p>
<p>我们再关闭一个<code>orderer</code>节点，使用下面命令来关闭<code>orderer1.example.com</code>:</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker stop orderer.example.com
</code></pre></td></tr></table>
</div>
</div><p>我们通过查看还在运行中的几个<code>orderer</code>节点日志，可以看到类似如下的信息，在第<code>4</code>轮选举中选出了<code>orderer5</code>作为<code>leader</code></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-08-21 22:29:30.971 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO <span style="color:#099">066</span> raft.node: <span style="color:#099">2</span> elected leader <span style="color:#099">5</span> at term <span style="color:#099">4</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
<span style="color:#998;font-style:italic"># leader 变成了 orderer 5</span>
2019-08-21 22:29:30.972 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO <span style="color:#099">067</span> Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">5</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">2</span>
</code></pre></td></tr></table>
</div>
</div><p>现在我们的网络中还存在有三个<code>orderer</code>节点组成的集群，理论上，这是最小的满足<code>raft</code>共识的集群数，为了验证网络的可用性，我们可以进入客户端<code>cli</code>容器，进行查询和转账等操作。具体步骤如下：
首先新建一个终端，使用<code>docker exec -it cli bash</code>进入客户端容器。我们先使用下面命令查询<code>a</code>的账户余额，得出结果为<code>90</code>。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer chaincode query -C mychannel -n mycc -c <span style="color:#d14">&#39;{&#34;Args&#34;:[&#34;query&#34;,&#34;a&#34;]}&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>我们再使用下面的命令进行转账交易操作：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer chaincode invoke -o orderer5.example.com:7050 --tls <span style="color:#0086b3">true</span> --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer5.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C mychannel -n mycc --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt -c <span style="color:#d14">&#39;{&#34;Args&#34;:[&#34;invoke&#34;,&#34;a&#34;,&#34;b&#34;,&#34;10&#34;]}&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>返回如下结果，说明成功进行转账操作。</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">2019-08-21 22:31:38.633 UTC <span style="color:#000;font-weight:bold">[</span>chaincodeCmd<span style="color:#000;font-weight:bold">]</span> chaincodeInvokeOrQuery -&gt; INFO <span style="color:#099">001</span> Chaincode invoke successful. result: status:200
</code></pre></td></tr></table>
</div>
</div><p>我们再次查询<code>a</code>的账户余额，可以看到余额变成了<code>80</code>，由此证明，这三个<code>orderer</code>节点组成的集群满足<code>raft</code>共识，网络没运行正常。</p>
<p>现在，我们再次将一个<code>orderer</code>节点容器关闭，使用<code>docker stop orderer5.example.com</code>命令关闭<code>orderer5</code>，我们来看会发生什么情况。</p>
<p>通过查看日志，我们就会发现，只有两个<code>orderer</code>节点，永远也不会选出<code>leader</code>，为了验证网络是否可用，我们进入<code>cli</code>客户端，使用如下命令，进行转账操作：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer chaincode invoke -o orderer2.example.com:7050 --tls <span style="color:#0086b3">true</span> --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer2.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C mychannel -n mycc --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt -c <span style="color:#d14">&#39;{&#34;Args&#34;:[&#34;invoke&#34;,&#34;a&#34;,&#34;b&#34;,&#34;10&#34;]}&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>我们可以发现，返回了如下错误信息，意思就是，没有<code>Raft leader</code></p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">Error: error sending transaction <span style="color:#000;font-weight:bold">for</span> invoke: got unexpected status: SERVICE_UNAVAILABLE -- no Raft leader - proposal response: version:1 response:&lt;status:200 &gt; .....
</code></pre></td></tr></table>
</div>
</div><p>而当我们使用如下命令<code>docker start orderer3.example.com</code>来重新启动<code>orderer3</code>时，此时，我们从<code>orderer3</code>的日志中可以看到如下信息：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#998;font-style:italic"># node 3 在第 5 轮循环中选则 node 4 作为 leader</span>
2019-08-21 22:50:11.483 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> run -&gt; INFO 0bf raft.node: <span style="color:#099">3</span> elected leader <span style="color:#099">4</span> at term <span style="color:#099">5</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic"># leader 由 node 0 变为 node 4</span>
2019-08-21 22:50:11.483 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> serveRequest -&gt; INFO 0c0 Raft leader changed: <span style="color:#099">0</span> -&gt; <span style="color:#099">4</span> <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
<span style="color:#998;font-style:italic"># node 3 写入 block[5] 到账本中（同步日志操作）</span>
2019-08-21 22:50:11.486 UTC <span style="color:#000;font-weight:bold">[</span>orderer.consensus.etcdraft<span style="color:#000;font-weight:bold">]</span> writeBlock -&gt; INFO 0c1 Writing block <span style="color:#000;font-weight:bold">[</span>5<span style="color:#000;font-weight:bold">]</span> <span style="color:#000;font-weight:bold">(</span>Raft index: 13<span style="color:#000;font-weight:bold">)</span> to ledger <span style="color:#008080">channel</span><span style="color:#000;font-weight:bold">=</span>mychannel <span style="color:#008080">node</span><span style="color:#000;font-weight:bold">=</span><span style="color:#099">3</span>
</code></pre></td></tr></table>
</div>
</div><p>此时，我们可以看到，<code>orderer</code>集群中已经有了新的<code>leader</code>，所有我们再次进入<code>cli</code>容器进行转账操作，命令如下：</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">peer chaincode invoke -o orderer4.example.com:7050 --tls <span style="color:#0086b3">true</span> --cafile /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/ordererOrganizations/example.com/orderers/orderer4.example.com/msp/tlscacerts/tlsca.example.com-cert.pem -C mychannel -n mycc --peerAddresses peer0.org1.example.com:7051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org1.example.com/peers/peer0.org1.example.com/tls/ca.crt --peerAddresses peer0.org2.example.com:9051 --tlsRootCertFiles /opt/gopath/src/github.com/hyperledger/fabric/peer/crypto/peerOrganizations/org2.example.com/peers/peer0.org2.example.com/tls/ca.crt -c <span style="color:#d14">&#39;{&#34;Args&#34;:[&#34;invoke&#34;,&#34;a&#34;,&#34;b&#34;,&#34;10&#34;]}&#39;</span>
</code></pre></td></tr></table>
</div>
</div><p>通过日志信息我们可以看到，成功执行转账操作，查询<code>a</code>账户余额，得到结果为<code>70</code>。这说明网络已经正常了。</p>
<h2 id="6-参考">6 参考</h2>
<ul>
<li><a href="https://medium.com/@spsingh559/detail-analysis-of-raft-its-implementation-in-hyperledger-fabric-d269367a79c0">Detail Analysis of Raft &amp; its implementation in Hyperledger Fabric</a></li>
<li><a href="https://www.jianshu.com/p/8e4bbe7e276c">共识算法：Raft</a></li>
<li><a href="https://www.infoq.cn/article/coreos-analyse-etcd/">CoreOS 实战：剖析 etcd</a></li>
<li><a href="http://thesecretlivesofdata.com/raft/#home">Raft 原理动画</a></li>
</ul>

        </div>

        
<div class="post-archive">
    <ul class="post-copyright">
        <li><strong>原文作者：</strong><a rel="author" href="https://shenyimingdada.github.io/">sym</a></li>
        <li style="word-break:break-all"><strong>原文链接：</strong><a href="https://shenyimingdada.github.io/post/%E5%9C%A8Fabric1.4.2%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%B9%B6%E5%88%86%E6%9E%90Raft%E5%85%B1%E8%AF%86/">https://shenyimingdada.github.io/post/%E5%9C%A8Fabric1.4.2%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%B9%B6%E5%88%86%E6%9E%90Raft%E5%85%B1%E8%AF%86/</a></li>
        <li><strong>版权声明：</strong>本作品采用<a rel="license" href="https://creativecommons.org/licenses/by-nc-nd/4.0/">知识共享署名-非商业性使用-禁止演绎 4.0 国际许可协议</a>进行许可，非商业转载请注明出处（作者，原文链接），商业转载请联系作者获得授权。</li>
    </ul>
</div>
<br/>



        

<div class="post-archive">
    <h2>See Also</h2>
    <ul class="listing">
        
        <li><a href="/first.html">test</a></li>
        
        <li><a href="/2019/12/18/golang-gin-query-parameters-array-map.html">Golang Gin 实战（五）| 接收数组和 Map</a></li>
        
        <li><a href="/post/2019-12-15-golang-gin-query-parameters-source-code-analysis/">Golang Gin 实战（三）| 路由参数</a></li>
        
        <li><a href="/post/2019-12-13-golang-gin-parameters-in-path/">Golang Gin 实战（三）| 路由参数</a></li>
        
        <li><a href="/about/">关于我</a></li>
        
    </ul>
</div>


        <div class="post-meta meta-tags">
            
            没有标签
            
        </div>
    </article>
    
    <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yourdiscussshortname" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

    
    
    <div class="post bg-white">
      <script src="https://utteranc.es/client.js"
            repo= "your github repo"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
      </script>
    </div>
    
</div>

                    <footer id="footer">
    <div>
        &copy; 2021 <a href="https://shenyimingdada.github.io/">sym的博客 By sym</a>
        
    </div>
    <br />
    <div>
        <div class="github-badge">
            <a href="https://gohugo.io/" target="_black" rel="nofollow"><span class="badge-subject">Powered by</span><span class="badge-value bg-blue">Hugo</span></a>
        </div>
        <div class="github-badge">
            <a href="https://www.flysnow.org/" target="_black"><span class="badge-subject">Design by</span><span class="badge-value bg-brightgreen">sym</span></a>
        </div>
        <div class="github-badge">
            <a href="https://github.com/flysnow-org/maupassant-hugo" target="_black"><span class="badge-subject">Theme</span><span class="badge-value bg-yellowgreen">Maupassant</span></a>
        </div>
    </div>
</footer>


    
    <script type="text/javascript">
        window.MathJax = {
            tex2jax: {
                inlineMath: [['$', '$']],
                processEscapes: true
                }
            };
    </script>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>

<a id="rocket" href="#top"></a>
<script type="text/javascript" src='/js/totop.js?v=0.0.0' async=""></script>



    <script type="text/javascript" src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script>




    <script src='/js/douban.js'></script>

                </div>

                <div id="secondary">
    <section class="widget">
        <form id="search" action='https://shenyimingdada.github.io/search/' method="get" accept-charset="utf-8" target="_blank" _lpchecked="1">
      
      <input type="text" name="q" maxlength="20" placeholder="Search">
      <input type="hidden" name="sitesearch" value="https://shenyimingdada.github.io/">
      <button type="submit" class="submit icon-search"></button>
</form>
    </section>
    
    <section class="widget">
        <h3 class="widget-title">最近文章</h3>
<ul class="widget-list">
    
    <li>
        <a href="https://shenyimingdada.github.io/first.html" title="test">test</a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/2019/12/18/golang-gin-query-parameters-array-map.html" title="Golang Gin 实战（五）| 接收数组和 Map">Golang Gin 实战（五）| 接收数组和 Map</a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/2019-12-13-golang-gin-parameters-in-path/" title="Golang Gin 实战（三）| 路由参数">Golang Gin 实战（三）| 路由参数</a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/2019-12-15-golang-gin-query-parameters-source-code-analysis/" title="Golang Gin 实战（三）| 路由参数">Golang Gin 实战（三）| 路由参数</a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/Fabirc-Explorer%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3/" title=""></a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/Fabric-CA%E7%9A%84%E4%BB%8B%E7%BB%8D%E5%8F%8A%E4%BD%BF%E7%94%A8/" title=""></a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/Fabric1.4.2%E7%9A%84%E6%90%AD%E5%BB%BA%E6%96%87%E6%A1%A3/" title=""></a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/Fabric%E4%B8%AD%E5%8A%A8%E6%80%81%E5%8A%A0%E5%85%A5%E8%8A%82%E7%82%B9/" title=""></a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/post/%E5%9C%A8Fabric1.4.2%E4%B8%AD%E4%BD%BF%E7%94%A8%E5%B9%B6%E5%88%86%E6%9E%90Raft%E5%85%B1%E8%AF%86/" title=""></a>
    </li>
    
    <li>
        <a href="https://shenyimingdada.github.io/%E4%BD%BF%E7%94%A8Chaincode%E5%BC%80%E5%8F%91%E6%A8%A1%E5%BC%8F%E8%B0%83%E8%AF%95%E9%93%BE%E7%A0%81.html" title="Fabric 中动态加入组织">Fabric 中动态加入组织</a>
    </li>
    
</ul>
    </section>

    

    <section class="widget">
        <h3 class="widget-title"><a href='/categories/'>分类</a></h3>
<ul class="widget-list">
    
    <li><a href="https://shenyimingdada.github.io/categories/Golang/">Golang (7)</a></li>
    
    <li><a href="https://shenyimingdada.github.io/categories/Python/">Python (1)</a></li>
    
    <li><a href="https://shenyimingdada.github.io/categories/fabric/">fabric (3)</a></li>
    
</ul>
    </section>

    <section class="widget">
        <h3 class="widget-title"><a href='/tags/'>标签</a></h3>
<div class="tagcloud">
    
    <a href="https://shenyimingdada.github.io/tags/fabric/">fabric</a>
    
    <a href="https://shenyimingdada.github.io/tags/golang/">golang</a>
    
    <a href="https://shenyimingdada.github.io/tags/python/">python</a>
    
</div>
    </section>

    
<section class="widget">
    <h3 class="widget-title">友情链接</h3>
    <ul class="widget-list">
        
        <li>
            <a target="_blank" href="https://www.flysnow.org/" title="sym的博客">sym的博客</a>
        </li>
        
        <li>
            <a target="_blank" href="http://yuedu.baidu.com/ebook/14a722970740be1e640e9a3e" title="Android Gradle权威指南">Android Gradle权威指南</a>
        </li>
        
    </ul>
</section>


    <section class="widget">
        <h3 class="widget-title">其它</h3>
        <ul class="widget-list">
            <li><a href="https://shenyimingdada.github.io/index.xml">文章 RSS</a></li>
        </ul>
    </section>
</div>
            </div>
        </div>
    </div>
</body>

</html>